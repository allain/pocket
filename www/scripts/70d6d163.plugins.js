!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var b=a(document).height(),c=this.$window.scrollTop(),d=this.$element.offset(),e=this.options.offset,f=e.bottom,g=e.top,h="affix affix-top affix-bottom",i;typeof e!="object"&&(f=g=e),typeof g=="function"&&(g=e.top()),typeof f=="function"&&(f=e.bottom()),i=this.unpin!=null&&c+this.unpin<=d.top?!1:f!=null&&d.top+this.$element.height()>=b-f?"bottom":g!=null&&c<=g?"top":!1;if(this.affixed===i)return;this.affixed=i,this.unpin=i=="bottom"?d.top-c:null,this.$element.removeClass(h).addClass("affix"+(i?"-"+i:""))};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f=typeof c=="object"&&c;e||d.data("affix",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){function d(){a(b).each(function(){e(a(this)).removeClass("open")})}function e(b){var c=b.attr("data-target"),d;return c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,"")),d=a(c),d.length||(d=b.parent()),d}"use strict";var b="[data-toggle=dropdown]",c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),f,g;if(c.is(".disabled, :disabled"))return;return f=e(c),g=f.hasClass("open"),d(),g||f.toggleClass("open"),c.focus(),!1},keydown:function(b){var c,d,f,g,h,i;if(!/(38|40|27)/.test(b.keyCode))return;c=a(this),b.preventDefault(),b.stopPropagation();if(c.is(".disabled, :disabled"))return;g=e(c),h=g.hasClass("open");if(!h||h&&b.keyCode==27)return c.click();d=a("[role=menu] li:not(.divider):visible a",g);if(!d.length)return;i=d.index(d.filter(":focus")),b.keyCode==38&&i>0&&i--,b.keyCode==40&&i<d.length-1&&i++,~i||(i=0),d.eq(i).focus()}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api touchstart.dropdown.data-api",d).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("touchstart.dropdown.data-api",".dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",b,c.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",b+", [role=menu]",c.prototype.keydown)}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.offset(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var b=this,c=this.tip();return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.detach(),this},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);c[c.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")})},hide:function(b){b&&b.preventDefault();var c=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(a){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict",a(function(){a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b=typeof this.$element[a]=="function"),b},move:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){if(this.suppressKeyPressRepeat)return;this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".item.active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j;this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),j=a.Event("slide",{relatedTarget:e[0]});if(e.hasClass("active"))return;if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),g=typeof c=="string"?c:f.slide;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):g?e[g]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var c=a(this),d=c.data("target")||c.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+b.$scrollElement.scrollTop(),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning)return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning)return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active:last a")[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery);var Events,Hoodie,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}};Events=function(){function a(){}return a.prototype.bind=function(a,b){var c,d,e,f,g,h;d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={}),h=[];for(f=0,g=d.length;f<g;f++)e=d[f],c[e]||(c[e]=[]),h.push(c[e].push(b));return h},a.prototype.on=a.prototype.bind,a.prototype.one=function(a,b){return this.bind(a,function(){return this.unbind(a,arguments.callee),b.apply(this,arguments)})},a.prototype.trigger=function(){var a,b,c,d,e,f,g;a=1<=arguments.length?__slice.call(arguments,0):[],c=a.shift(),d=this.hasOwnProperty("_callbacks")&&((g=this._callbacks)!=null?g[c]:void 0);if(!d)return;for(e=0,f=d.length;e<f;e++)b=d[e],b.apply(this,a);return!0},a.prototype.unbind=function(a,b){var c,d,e,f,g,h;if(!a)return this._callbacks={},this;e=(h=this._callbacks)!=null?h[a]:void 0;if(!e)return this;if(!b)return delete this._callbacks[a],this;for(d=f=0,g=e.length;f<g;d=++f){c=e[d];if(c!==b)continue;e=e.slice(),e.splice(d,1),this._callbacks[a]=e;break}return this},a}(),Hoodie=function(a){function b(a){this.baseUrl=a,this.baseUrl?this.baseUrl=this.baseUrl.replace(/\/+$/,""):this.baseUrl=location.protocol+"//api."+location.hostname.replace(/^www\./,""),this.store=new this.constructor.LocalStore(this),this.config=new this.constructor.Config(this),this.account=new this.constructor.Account(this),this.remote=new this.constructor.AccountRemote(this),this._loadExtensions()}return __extends(b,a),b.prototype.request=function(a,b,c){var d;return c==null&&(c={}),d={type:a,url:""+this.baseUrl+b,xhrFields:{withCredentials:!0},crossDomain:!0,dataType:"json"},$.ajax($.extend(d,c))},b.prototype.open=function(a,c){return c==null&&(c={}),$.extend(c,{name:a}),new b.Remote(this,c)},b.prototype.uuid=function(a){var b,c,d;return a==null&&(a=7),b="0123456789abcdefghijklmnopqrstuvwxyz".split(""),d=b.length,function(){var e,f;f=[];for(c=e=0;0<=a?e<a:e>a;c=0<=a?++e:--e)f.push(b[0|Math.random()*d]);return f}().join("")},b.prototype.defer=$.Deferred,b.prototype.isPromise=function(a){return typeof (a!=null?a.done:void 0)=="function"&&typeof a.resolve=="undefined"},b.prototype.resolveWith=function(){var a;return(a=this.defer()).resolve.apply(a,arguments).promise()},b.prototype.rejectWith=function(){var a;return(a=this.defer()).reject.apply(a,arguments).promise()},b.extend=function(a,b){return this._extensions||(this._extensions={}),this._extensions[a]=b},b.prototype.extend=function(a,b){return this[a]=new b(this)},b.prototype._loadExtensions=function(){var a,b,c,d;c=this.constructor._extensions,d=[];for(b in c)a=c[b],d.push(this[b]=new a(this));return d},b}(Events),Hoodie.Account=function(){function a(a){this.hoodie=a,this._handleChangeUsernameAndPasswordRequest=__bind(this._handleChangeUsernameAndPasswordRequest,this),this._sendChangeUsernameAndPasswordRequest=__bind(this._sendChangeUsernameAndPasswordRequest,this),this._cleanup=__bind(this._cleanup,this),this._handleFetchBeforeDestroySucces=__bind(this._handleFetchBeforeDestroySucces,this),this._handlePasswordResetStatusRequestError=__bind(this._handlePasswordResetStatusRequestError,this),this._handlePasswordResetStatusRequestSuccess=__bind(this._handlePasswordResetStatusRequestSuccess,this),this._checkPasswordResetStatus=__bind(this._checkPasswordResetStatus,this),this._handleSignInSuccess=__bind(this._handleSignInSuccess,this),this._delayedSignIn=__bind(this._delayedSignIn,this),this._handleSignUpSucces=__bind(this._handleSignUpSucces,this),this._handleRequestError=__bind(this._handleRequestError,this),this._handleAuthenticateSuccess=__bind(this._handleAuthenticateSuccess,this),this.fetch=__bind(this.fetch,this),this.authenticate=__bind(this.authenticate,this),this.username=this.hoodie.config.get("_account.username"),this.ownerHash=this.hoodie.config.get("_account.ownerHash"),this.ownerHash||this._setOwner(this.hoodie.uuid()),window.setTimeout(this.authenticate),this._checkPasswordResetStatus()}return a.prototype.username=void 0,a.prototype.authenticate=function(){return this.username?this._authenticated===!0?this.hoodie.defer().resolve(this.username).promise():this._authenticated===!1?this.hoodie.defer().reject().promise():this.hoodie.request("GET","/_session").pipe(this._handleAuthenticateSuccess,this._handleRequestError):(this._sendSignOutRequest(),this.hoodie.defer().reject().promise())},a.prototype.signUp=function(a,b){var c;return b==null&&(b=""),a?this.hasAnonymousAccount()?this._upgradeAnonymousAccount(a,b):this.hasAccount()?this.hoodie.defer().reject({error:"you have to sign out first"}).promise():(c={data:JSON.stringify({_id:this._key(a),name:this._userKey(a),type:"user",roles:[],password:b,ownerHash:this.ownerHash,database:this.db()}),contentType:"application/json"},this.hoodie.request("PUT",this._url(a),c).pipe(this._handleSignUpSucces(a,b),this._handleRequestError)):this.hoodie.defer().reject({error:"username must be set"}).promise()},a.prototype.anonymousSignUp=function(){var a,b,c=this;return a=this.hoodie.uuid(10),b=this.ownerHash,this.signUp(b,a).pipe(null,this._handleRequestError).done(function(){return c.hoodie.config.set("_account.anonymousPassword",a),c.trigger("signup:anonymous",b)})},a.prototype.hasAccount=function(){return this.username!=null},a.prototype.hasAnonymousAccount=function(){return this.hoodie.config.get("_account.anonymousPassword")!=null},a.prototype.signIn=function(a,b){var c=this;return b==null&&(b=""),this.signOut({silent:!0}).pipe(function(){return c._sendSignInRequest(a,b)})},a.prototype.signOut=function(a){return a==null&&(a={}),this.hasAccount()?(this.hoodie.remote.disconnect(),this._sendSignOutRequest().pipe(this._cleanup)):this._cleanup(a)},a.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1account:$2"),this.hoodie.on(a,b)},a.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["account:"+a].concat(__slice.call(b)))},a.prototype.db=function(){return"user/"+this.ownerHash},a.prototype.fetch=function(a){var b=this;return a==null&&(a=this.username),a?this._withSingleRequest("fetch",function(){return b.hoodie.request("GET",b._url(a)).pipe(null,b._handleRequestError).done(function(a){return b._doc=a})}):this.hoodie.defer().reject({error:"unauthenticated",reason:"not logged in"}).promise()},a.prototype.changePassword=function(a,b){return this.username?(this.hoodie.remote.disconnect(),this.fetch().pipe(this._sendChangeUsernameAndPasswordRequest(a,null,b),this._handleRequestError)):this.hoodie.defer().reject({error:"unauthenticated",reason:"not logged in"}).promise()},a.prototype.resetPassword=function(a){var b,c,d,e,f=this;return(e=this.hoodie.config.get("_account.resetPasswordId"))?this._checkPasswordResetStatus():(e=""+a+"/"+this.hoodie.uuid(),this.hoodie.config.set("_account.resetPasswordId",e),c=""+this._prefix+":$passwordReset/"+e,b={_id:c,name:"$passwordReset/"+e,type:"user",roles:[],password:e,$createdAt:new Date,$updatedAt:new Date},d={data:JSON.stringify(b),contentType:"application/json"},this._withPreviousRequestsAborted("resetPassword",function(){return f.hoodie.request("PUT","/_users/"+encodeURIComponent(c),d).pipe(null,f._handleRequestError).done(f._checkPasswordResetStatus)}))},a.prototype.changeUsername=function(a,b){return this._changeUsernameAndPassword(a,b)},a.prototype.destroy=function(){return this.hasAccount()?this.fetch().pipe(this._handleFetchBeforeDestroySucces,this._handleRequestError).pipe(this._cleanup):this._cleanup()},a.prototype._prefix="org.couchdb.user",a.prototype._doc={},a.prototype._requests={},a.prototype._setUsername=function(a){return this.username=a,this.hoodie.config.set("_account.username",this.username)},a.prototype._setOwner=function(a){return this.ownerHash=a,this.hoodie.config.set("$createdBy",this.ownerHash),this.hoodie.config.set("_account.ownerHash",this.ownerHash)},a.prototype._handleAuthenticateSuccess=function(a){var b;return b=this.hoodie.defer(),a.userCtx.name?(this._authenticated=!0,this._setUsername(a.userCtx.name.replace(/^user(_anonymous)?\//,"")),this._setOwner(a.userCtx.roles[0]),b.resolve(this.username)):(this._authenticated=!1,this.trigger("error:unauthenticated"),b.reject()),b.promise()},a.prototype._handleRequestError=function(a){var b;a==null&&(a={});try{b=JSON.parse(a.responseText)}catch(c){b={error:a.responseText||"unknown"}}return this.hoodie.defer().reject(b).promise()},a.prototype._handleSignUpSucces=function(a,b){var c,d=this;return c=this.hoodie.defer(),function(c){return d.trigger("signup",a),d._doc._rev=c.rev,d._delayedSignIn(a,b)}},a.prototype._delayedSignIn=function(a,b){var c,d=this;return c=this.hoodie.defer(),window.setTimeout(function(){var e;return e=d._sendSignInRequest(a,b),e.done(c.resolve),e.fail(function(e){return e.error==="unconfirmed"?d._delayedSignIn(a,b):c.reject.apply(c,arguments)})},300),c.promise()},a.prototype._handleSignInSuccess=function(a){var b,c,d=this;return b=this.hoodie.defer(),c=a.name.replace(/^user(_anonymous)?\//,""),~a.roles.indexOf("error")?(this.fetch(c).fail(b.reject).done(function(){return b.reject({error:"error",reason:d._doc.$error})}),b.promise()):~a.roles.indexOf("confirmed")?(this._authenticated=!0,this._setOwner(a.roles[0]),this._setUsername(c),this.hasAnonymousAccount()?this.trigger("signin:anonymous",c):this.trigger("signin",c),this.fetch(),b.resolve(this.username,a.roles[0])):b.reject({error:"unconfirmed",reason:"account has not been confirmed yet"})},a.prototype._checkPasswordResetStatus=function(){var a,b,c,d,e,f=this;return c=this.hoodie.config.get("_account.resetPasswordId"),c?(e="$passwordReset/"+c,d="/_users/"+encodeURIComponent(""+this._prefix+":"+e),a=btoa(""+e+":"+c),b={headers:{Authorization:"Basic "+a}},this._withPreviousRequestsAborted("passwordResetStatus",function(){return f.hoodie.request("GET",d,b).pipe(f._handlePasswordResetStatusRequestSuccess,f._handlePasswordResetStatusRequestError).fail(function(a){if(a.error==="pending"){window.setTimeout(f._checkPasswordResetStatus,1e3);return}return f.trigger("password_reset:error")})})):this.hoodie.defer().reject({error:"missing"}).promise()},a.prototype._handlePasswordResetStatusRequestSuccess=function(a){var b;return b=this.hoodie.defer(),a.$error?b.reject(a.$error):b.reject({error:"pending"}),b.promise()},a.prototype._handlePasswordResetStatusRequestError=function(a){return a.status===401?(this.hoodie.config.remove("_account.resetPasswordId"),this.trigger("passwordreset"),this.hoodie.defer().resolve()):this._handleRequestError(a)},a.prototype._changeUsernameAndPassword=function(a,b,c){var d=this;return this._sendSignInRequest(this.username,a).pipe(function(){return d.fetch().pipe(d._sendChangeUsernameAndPasswordRequest(a,b,c))})},a.prototype._upgradeAnonymousAccount=function(a,b){var c,d=this;return c=this.hoodie.config.get("_account.anonymousPassword"),this._changeUsernameAndPassword(c,a,b).done(function(){return d.trigger("signup",a),d.hoodie.config.remove("_account.anonymousPassword")})},a.prototype._handleFetchBeforeDestroySucces=function(){var a=this;return this.hoodie.remote.disconnect(),this._doc._deleted=!0,this._withPreviousRequestsAborted("updateUsersDoc",function(){return a.hoodie.request("PUT",a._url(),{data:JSON.stringify(a._doc),contentType:"application/json"})})},a.prototype._cleanup=function(a){return a==null&&(a={}),delete this.username,delete this._authenticated,this.hoodie.config.clear(),a.silent||this.trigger("signout"),this._setOwner(this.hoodie.uuid()),this.hoodie.defer().resolve().promise()},a.prototype._userKey=function(a){return a===this.ownerHash?"user_anonymous/"+a:"user/"+a},a.prototype._key=function(a){return a==null&&(a=this.username),""+this._prefix+":"+this._userKey(a)},a.prototype._url=function(a){return"/_users/"+encodeURIComponent(this._key(a))},a.prototype._sendChangeUsernameAndPasswordRequest=function(a,b,c){var d=this;return function(){var e,f;return e=$.extend({},d._doc),b&&(e.$newUsername=b),c!=null&&(delete e.salt,delete e.password_sha,e.password=c),f={data:JSON.stringify(e),contentType:"application/json"},d._withPreviousRequestsAborted("updateUsersDoc",function(){return d.hoodie.request("PUT",d._url(),f).pipe(d._handleChangeUsernameAndPasswordRequest(b,c||a),d._handleRequestError)})}},a.prototype._handleChangeUsernameAndPasswordRequest=function(a,b){var c=this;return function(){return c.hoodie.remote.disconnect(),a?c._delayedSignIn(a,b):c.signIn(c.username,b)}},a.prototype._withPreviousRequestsAborted=function(a,b){var c;return(c=this._requests[a])!=null&&typeof c.abort=="function"&&c.abort(),this._requests[a]=b()},a.prototype._withSingleRequest=function(a,b){var c;return((c=this._requests[a])!=null?typeof c.state=="function"?c.state():void 0:void 0)==="pending"?this._requests[a]:this._requests[a]=b()},a.prototype._sendSignOutRequest=function(){var a=this;return this._withSingleRequest("signOut",function(){return a.hoodie.request("DELETE","/_session").pipe(null,a._handleRequestError)})},a.prototype._sendSignInRequest=function(a,b){var c,d=this;return c={data:{name:this._userKey(a),password:b}},this._withPreviousRequestsAborted("signIn",function(){var a;return a=d.hoodie.request("POST","/_session",c),a.pipe(d._handleSignInSuccess,d._handleRequestError)})},a}(),Hoodie.Config=function(){function a(a,b){var c=this;this.hoodie=a,b==null&&(b={}),this.clear=__bind(this.clear,this),b.$type&&(this.$type=b.$type),b.id&&(this.id=b.id),this.hoodie.store.find(this.$type,this.id).done(function(a){return c.cache=a}),this.hoodie.on("account:signedOut",this.clear)}return a.prototype.$type="$config",a.prototype.id="hoodie",a.prototype.cache={},a.prototype.set=function(a,b){var c,d;if(this.cache[a]===b)return;return this.cache[a]=b,d={},d[a]=b,c=a.charAt(0)==="_",this.hoodie.store.update(this.$type,this.id,d,{silent:c})},a.prototype.get=function(a){return this.cache[a]},a.prototype.clear=function(){return this.cache={},this.hoodie.store.remove(this.$type,this.id)},a.prototype.remove=a.prototype.set,a}(),Hoodie.Email=function(){function a(a){this.hoodie=a,this._handleEmailUpdate=__bind(this._handleEmailUpdate,this)}return a.prototype.send=function(a){var b,c,d=this;return a==null&&(a={}),c=this.hoodie.defer(),b=$.extend({},a),this._isValidEmail(a.to)?(this.hoodie.store.add("$email",b).then(function(a){return d._handleEmailUpdate(c,a)}),c.promise()):(b.error="Invalid email address ("+(b.to||"empty")+")",c.reject(b).promise())},a.prototype._isValidEmail=function(a){return a==null&&(a=""),/@/.test(a)},a.prototype._handleEmailUpdate=function(a,b){var c=this;return b==null&&(b={}),b.error?a.reject(b):b.deliveredAt?a.resolve(b):this.hoodie.remote.one("updated:$email:"+b.id,function(b){return c._handleEmailUpdate(a,b)})},a}(),Hoodie.extend("email",Hoodie.Email),Hoodie.Errors={INVALID_KEY:function(a){var b;return b=a.id?"id":"type",new Error("invalid "+b+" '"+a[b]+"': numbers and lowercase letters allowed only")},INVALID_ARGUMENTS:function(a){return new Error(a)},NOT_FOUND:function(a,b){return new Error(""+a+" with "+b+" could not be found")}},Hoodie.Store=function(){function a(a){this.hoodie=a}return a.prototype.save=function(a,b,c,d){var e;return d==null&&(d={}),e=this.hoodie.defer(),typeof c!="object"?(e.reject(Hoodie.Errors.INVALID_ARGUMENTS("object is "+typeof c)),e.promise()):b&&!this._isValidId(b)?e.reject(Hoodie.Errors.INVALID_KEY({id:b})).promise():this._isValidType(a)?e:e.reject(Hoodie.Errors.INVALID_KEY({type:a})).promise()},a.prototype.add=function(a,b,c){return b==null&&(b={}),c==null&&(c={}),this.save(a,b.id,b)},a.prototype.update=function(a,b,c,d){var e,f,g=this;return e=this.hoodie.defer(),f=this.find(a,b).pipe(function(f){var h,i,j,k;return j=$.extend(!0,{},f),typeof c=="function"&&(c=c(j)),c?(h=function(){var a;a=[];for(i in c){k=c[i];if(f[i]===k)continue;j[i]=k,a.push(i)}return a}(),!h.length&&!d?e.resolve(j):g.save(a,b,j,d).then(e.resolve,e.reject)):e.resolve(f)}),f.fail(function(){return g.save(a,b,c,d).then(e.resolve,e.reject)}),e.promise()},a.prototype.updateAll=function(a,b,c){var d,e=this;c==null&&(c={});switch(!0){case typeof a=="string":d=this.findAll(a);break;case this.hoodie.isPromise(a):d=a;break;case $.isArray(a):d=this.hoodie.defer().resolve(a).promise();break;default:d=this.findAll()}return d.pipe(function(a){var d,f,g;return d=e.hoodie.defer(),$.isArray(a)||(a=[a]),g=function(){var d,e,g;g=[];for(d=0,e=a.length;d<e;d++)f=a[d],g.push(this.update(f.$type,f.id,b,c));return g}.call(e),$.when.apply(null,g).then(d.resolve),d.promise()})},a.prototype.find=function(a,b){var c;return c=this.hoodie.defer(),typeof a!="string"||typeof b!="string"?c.reject(Hoodie.Errors.INVALID_ARGUMENTS("type & id are required")).promise():c},a.prototype.findOrAdd=function(a,b,c){var d,e=this;return c==null&&(c={}),d=this.hoodie.defer(),this.find(a,b).done(d.resolve).fail(function(){var f;return f=$.extend(!0,{id:b},c),e.add(a,f).then(d.resolve,d.reject)}),d.promise()},a.prototype.findAll=function(){return this.hoodie.defer()},a.prototype.remove=function(a,b,c){var d;return c==null&&(c={}),d=this.hoodie.defer(),typeof a!="string"||typeof b!="string"?d.reject(Hoodie.Errors.INVALID_ARGUMENTS("type & id are required")).promise():d},a.prototype.removeAll=function(a,b){var c=this;return b==null&&(b={}),this.findAll(a).pipe(function(a){var d,e,f,g;g=[];for(e=0,f=a.length;e<f;e++)d=a[e],g.push(c.remove(d.$type,d.id,b));return g})},a.prototype._now=function(){return new Date},a.prototype._isValidId=function(a){return/^[a-z0-9\-]+$/.test(a)},a.prototype._isValidType=function(a){return/^[a-z$][a-z0-9]+$/.test(a)},a}(),Hoodie.RemoteStore=function(a){function b(a,b){this.hoodie=a,this.remote=b,this._mapDocsFromFindAll=__bind(this._mapDocsFromFindAll,this),this.parseAllFromRemote=__bind(this.parseAllFromRemote,this),this.parseFromRemote=__bind(this.parseFromRemote,this)}return __extends(b,a),b.prototype.find=function(a,c){var d,e;return d=b.__super__.find.apply(this,arguments),this.hoodie.isPromise(d)?d:(e="/"+encodeURIComponent(""+a+"/"+c),this.remote.request("GET",e).pipe(this.parseFromRemote))},b.prototype.findAll=function(a){var c,d,e,f;c=b.__super__.findAll.apply(this,arguments);if(this.hoodie.isPromise(c))return c;e="/_all_docs?include_docs=true";switch(!0){case a!=null&&this.remote.prefix!=="":d=""+this.remote.prefix+"/"+a;break;case a!=null:d=a;break;case this.remote.prefix!=="":d=this.remote.prefix;break;default:d=""}return d&&(e=""+e+'&startkey="'+d+'/"&endkey="'+d+'0"'),f=this.remote.request("GET",e),f.fail(c.reject),f.pipe(this._mapDocsFromFindAll).pipe(this.parseAllFromRemote).done(c.resolve),c.promise()},b.prototype.save=function(a,c,d){var e,f,g;return e=b.__super__.save.apply(this,arguments),this.hoodie.isPromise(e)?e:(c||(c=this.hoodie.uuid()),d=$.extend({$type:a,id:c},d),f=this.parseForRemote(d),g="/"+encodeURIComponent(f._id),this.remote.request("PUT",g,{data:f}))},b.prototype.remove=function(a,b){return this.update(a,b,{_deleted:!0})},b.prototype.removeAll=function(a){return this.updateAll(a,{_deleted:!0})},b.prototype.parseForRemote=function(a){var b,c;c=$.extend({},a);for(b in c){if(~this._validSpecialAttributes.indexOf(b))continue;if(!/^_/.test(b))continue;delete c[b]}return c._id=""+c.$type+"/"+c.id,this.remote.prefix&&(c._id=""+this.remote.prefix+"/"+c._id),delete c.id,this._addRevisionTo(c),c},b.prototype.parseFromRemote=function(a){var b,c;return b=a._id||a.id,delete a._id,this.remote.prefix&&(b=b.replace(RegExp("^"+this.remote.prefix+"/"),"")),c=b.split(/\//),a.$type=c[0],a.id=c[1],a.$createdAt&&(a.$createdAt=new Date(Date.parse(a.$createdAt))),a.$updatedAt&&(a.$updatedAt=new Date(Date.parse(a.$updatedAt))),a.rev&&(a._rev=a.rev,delete a.rev),a},b.prototype.parseAllFromRemote=function(a){var b,c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(this.parseFromRemote(b));return e},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.remote.name+":store:$2"),this.hoodie.on(a,b)},b.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.remote.name+":store:$2"),this.hoodie.one(a,b)},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,[""+this.remote.name+":store:"+a].concat(__slice.call(b)))},b.prototype._validSpecialAttributes=["_id","_rev","_deleted","_revisions","_attachments"],b.prototype._generateNewRevisionId=function(){return this.hoodie.uuid(9)},b.prototype._addRevisionTo=function(a){var b,c,d,e;try{e=a._rev.split(/-/),c=e[0],b=e[1]}catch(f){}c=parseInt(c,10)||0,d=this._generateNewRevisionId(),a._rev=""+(c+1)+"-"+d,a._revisions={start:1,ids:[d]};if(b)return a._revisions.start+=c,a._revisions.ids.push(b)},b.prototype._mapDocsFromFindAll=function(a){return a.rows.map(function(a){return a.doc})},b}(Hoodie.Store),Hoodie.Remote=function(){function a(a,b){this.hoodie=a,b==null&&(b={}),this._handlePushSuccess=__bind(this._handlePushSuccess,this),this._handlePullResults=__bind(this._handlePullResults,this),this._handlePullError=__bind(this._handlePullError,this),this._handlePullSuccess=__bind(this._handlePullSuccess,this),this._restartPullRequest=__bind(this._restartPullRequest,this),this.sync=__bind(this.sync,this),this.push=__bind(this.push,this),this.pull=__bind(this.pull,this),this.stopSyncing=__bind(this.stopSyncing,this),this.startSyncing=__bind(this.startSyncing,this),this.disconnect=__bind(this.disconnect,this),this.connect=__bind(this.connect,this),b.name!=null&&(this.name=b.name,this.prefix=this.name),b.prefix!=null&&(this.prefix=b.prefix),b.sync&&(this._sync=b.sync),this.store=new this.Store(this.hoodie,this),this.isContinuouslySyncing()&&this.startSyncing()}return a.prototype.Store=Hoodie.RemoteStore,a.prototype.name=void 0,a.prototype._sync=!1,a.prototype.prefix="",a.prototype.request=function(a,b,c){c==null&&(c={}),this.name&&(b="/"+encodeURIComponent(this.name)+b),c.contentType||(c.contentType="application/json");if(a==="POST"||a==="PUT")c.dataType||(c.dataType="json"),c.processData||(c.processData=!1),c.data=JSON.stringify(c.data);return this.hoodie.request(a,b,c)},a.prototype.get=function(a,b){return console.log.apply(console,[".get() not yet implemented"].concat(__slice.call(arguments)))},a.prototype.post=function(a,b){return console.log.apply(console,[".post() not yet implemented"].concat(__slice.call(arguments)))},a.prototype.connect=function(a){return this.connected=!0,this.sync()},a.prototype.disconnect=function(){var a,b;return this.connected=!1,(a=this._pullRequest)!=null&&a.abort(),(b=this._pushRequest)!=null?b.abort():void 0},a.prototype.startSyncing=function(){return this._sync=!0,this.connect()},a.prototype.stopSyncing=function(){return this._sync=!1},a.prototype.isContinuouslyPulling=function(){var a;return this._sync===!0||((a=this._sync)!=null?a.pull:void 0)===!0},a.prototype.isContinuouslyPushing=function(){var a;return this._sync===!0||((a=this._sync)!=null?a.push:void 0)===!0},a.prototype.isContinuouslySyncing=function(){return this._sync===!0},a.prototype.getSinceNr=function(){return this._since||0},a.prototype.setSinceNr=function(a){return this._since=a},a.prototype.pull=function(){return this._pullRequest=this.request("GET",this._pullUrl()),this.connected&&this.isContinuouslyPulling()&&(window.clearTimeout(this._pullRequestTimeout),this._pullRequestTimeout=window.setTimeout(this._restartPullRequest,25e3)),this._pullRequest.then(this._handlePullSuccess,this._handlePullError)},a.prototype.push=function(a){var b,c,d,e;if(a!=null?!a.length:!void 0)return this.hoodie.defer().resolve([]).promise();c=[];for(d=0,e=a.length;d<e;d++)b=a[d],c.push(this.store.parseForRemote(b));return this._pushRequest=this.request("POST","/_bulk_docs",{data:{docs:c,new_edits:!1}}),this._pushRequest.done(this._handlePushSuccess(a,c))},a.prototype.sync=function(a){return this.push(a).pipe(this.pull)},a.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.name+":$2"),this.hoodie.on(a,b)},a.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1"+this.name+":$2"),this.hoodie.one(a,b)},a.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,[""+this.name+":"+a].concat(__slice.call(b)))},a.prototype._pullUrl=function(){var a;return a=this.getSinceNr(),this.isContinuouslyPulling()?"/_changes?include_docs=true&since="+a+"&heartbeat=10000&feed=longpoll":"/_changes?include_docs=true&since="+a},a.prototype._restartPullRequest=function(){var a;return(a=this._pullRequest)!=null?a.abort():void 0},a.prototype._handlePullSuccess=function(a){this.setSinceNr(a.last_seq),this._handlePullResults(a.results);if(this.connected&&this.isContinuouslyPulling())return this.pull()},a.prototype._handlePullError=function(a,b,c){if(!this.connected)return;switch(a.status){case 401:return this.trigger("error:unauthenticated",b),this.disconnect();case 404:return window.setTimeout(this.pull,3e3);case 500:return this.trigger("error:server",b),window.setTimeout(this.pull,3e3);default:if(!this.isContinuouslyPulling())return;return a.statusText==="abort"?this.pull():window.setTimeout(this.pull,3e3)}},a.prototype._knownObjects={},a.prototype._handlePullResults=function(a){var b,c,d,e,f,g;g=[];for(e=0,f=a.length;e<f;e++)b=a[e].doc,d=this.store.parseFromRemote(b),d._deleted?(c="remove",delete this._knownObjects[b._id]):this._knownObjects[b._id]?c="update":(c="add",this._knownObjects[b._id]=1),this.trigger("store:"+c,d),this.trigger("store:"+c+":"+d.$type,d),this.trigger("store:"+c+":"+d.$type+":"+d.id,d),this.trigger("store:change",c,d),this.trigger("store:change:"+d.$type,c,d),g.push(this.trigger("store:change:"+d.$type+":"+d.id,c,d));return g},a.prototype._handlePushSuccess=function(a,b){},a}(),Hoodie.Share=function(){function a(a){var b;return this.hoodie=a,this._open=__bind(this._open,this),this.instance=Hoodie.ShareInstance,b=this._open,$.extend(b,this),this.hoodie.store.decoratePromises({shareAt:this._storeShareAt,unshareAt:this._storeUnshareAt,unshare:this._storeUnshare,share:this._storeShare}),b}return a.prototype.add=function(a){var b=this;return a==null&&(a={}),this.hoodie.store.add("$share",this._filterShareOptions(a)).pipe(function(a){return b.hoodie.account.hasAccount()||b.hoodie.account.anonymousSignUp(),new b.instance(b.hoodie,a)})},a.prototype.find=function(a){var b=this;return this.hoodie.store.find("$share",a).pipe(function(a){return new b.instance(b.hoodie,a)})},a.prototype.findAll=function(){var a=this;return this.hoodie.store.findAll("$share").pipe(function(b){var c,d,e,f;f=[];for(d=0,e=b.length;d<e;d++)c=b[d],f.push(new a.instance(a.hoodie,c));return f})},a.prototype.findOrAdd=function(a,b){var c=this;return this.hoodie.store.findOrAdd("$share",a,this._filterShareOptions(b)).pipe(function(a){return c.hoodie.account.hasAccount()||c.hoodie.account.anonymousSignUp(),new c.instance(c.hoodie,a)})},a.prototype.save=function(a,b){var c=this;return this.hoodie.store.save("$share",a,this._filterShareOptions(b)).pipe(function(a){return new c.instance(c.hoodie,a)})},a.prototype.update=function(a,b){var c=this;return this.hoodie.store.update("$share",a,this._filterShareOptions(b)).pipe(function(a){return new c.instance(c.hoodie,a)})},a.prototype.updateAll=function(a){var b=this;return this.hoodie.store.updateAll("$share",this._filterShareOptions(a)).pipe(function(a){var c,d,e,f;f=[];for(d=0,e=a.length;d<e;d++)c=a[d],f.push(new b.instance(b.hoodie,c));return f})},a.prototype.remove=function(a){return this.hoodie.store.findAll(function(b){return b.$shares[a]}).unshareAt(a),this.hoodie.store.remove("$share",a)},a.prototype.removeAll=function(){return this.hoodie.store.findAll(function(a){return a.$shares}).unshare(),this.hoodie.store.removeAll("$share")},a.prototype._allowedOptions=["id","access","$createdBy"],a.prototype._filterShareOptions=function(a){var b,c,d,e,f;a==null&&(a={}),b={},f=this._allowedOptions;for(d=0,e=f.length;d<e;d++)c=f[d],a.hasOwnProperty(c)&&(b[c]=a[c]);return b},a.prototype._open=function(a,b){return b==null&&(b={}),$.extend(b,{id:a}),new this.instance(this.hoodie,b)},a.prototype._storeShareAt=function(a,b){var c=this;return this.pipe(function(d){var e,f,g,h,i;f=function(d){return d.$shares||(d.$shares={}),d.$shares[a]=b||!0,c.hoodie.store.update(d.$type,d.id,{$shares:d.$shares}),d};if($.isArray(d)){i=[];for(g=0,h=d.length;g<h;g++)e=d[g],i.push(f(e));return i}return f(d)})},a.prototype._storeUnshareAt=function(a){var b=this;return this.pipe(function(c){var d,e,f,g,h;e=function(c){return!c.$shares||!c.$shares[a]?c:(c.$shares[a]=!1,b.hoodie.store.update(c.$type,c.id,{$shares:c.$shares}),c)};if($.isArray(c)){h=[];for(f=0,g=c.length;f<g;f++)d=c[f],h.push(e(d));return h}return e(c)})},a.prototype._storeUnshare=function(){var a=this;return this.pipe(function(b){var c,d,e,f,g;d=function(b){var c;if(!b.$shares)return b;for(c in b.$shares)b.$shares[c]=!1;return a.hoodie.store.update(b.$type,b.id,{$shares:b.$shares}),b};if($.isArray(b)){g=[];for(e=0,f=b.length;e<f;e++)c=b[e],g.push(d(c));return g}return d(b)})},a.prototype._storeShare=function(a){var b=this;return this.pipe(function(c){return b.hoodie.share.add().pipe(function(d){var e,f,g;return f=function(c){return c.$shares||(c.$shares={}),c.$shares[d.id]=a||!0,b.hoodie.store.update(c.$type,c.id,{$shares:c.$shares}),c},g=function(){var a,b,d;if($.isArray(c)){d=[];for(a=0,b=c.length;a<b;a++)e=c[a],d.push(f(e));return d}return f(c)}(),b.hoodie.defer().resolve(g,d).promise()})})},a}(),Hoodie.extend("share",Hoodie.Share),Hoodie.User=function(){function a(a){var b=this;return this.hoodie=a,this.hoodie.store.decoratePromises({publish:this._storePublish,unpublish:this._storeUnpublish}),function(a,c){return c==null&&(c={}),$.extend(c,{prefix:"$public"}),b.hoodie.open("user/"+a+"/public",c)}}return a.prototype._storePublish=function(a){var b=this;return this.pipe(function(c){var d,e,f,g;$.isArray(c)||(c=[c]),g=[];for(e=0,f=c.length;e<f;e++)d=c[e],g.push(b.hoodie.store.update(d.$type,d.id,{$public:a||!0}));return g})},a.prototype._storeUnpublish=function(){var a=this;return this.pipe(function(b){var c,d,e,f;$.isArray(b)||(b=[b]),f=[];for(d=0,e=b.length;d<e;d++)c=b[d],c.$public&&f.push(a.hoodie.store.update(c.$type,c.id,{$public:!1}));return f})},a}(),Hoodie.extend("user",Hoodie.User),Hoodie.Global=function(){function a(a){return a.open("global")}return a}(),Hoodie.extend("global",Hoodie.Global),Hoodie.AccountRemote=function(a){function b(a,c){this.hoodie=a,c==null&&(c={}),this._handlePullResults=__bind(this._handlePullResults,this),this._handlePushSuccess=__bind(this._handlePushSuccess,this),this._handleSignIn=__bind(this._handleSignIn,this),this.push=__bind(this.push,this),this.sync=__bind(this.sync,this),this.stopSyncing=__bind(this.stopSyncing,this),this.startSyncing=__bind(this.startSyncing,this),this.connect=__bind(this.connect,this),this.name=this.hoodie.account.db(),this.hoodie.config.get("_remote.sync")!=null&&(this._sync=this.hoodie.config.get("_remote.sync")),c.prefix="",b.__super__.constructor.call(this,this.hoodie,c)}return __extends(b,a),b.prototype._sync=!0,b.prototype.connect=function(){var a=this;return this.hoodie.account.authenticate().pipe(function(){return b.__super__.connect.apply(a,arguments)})},b.prototype.disconnect=function(){return this.hoodie.unbind("store:idle",this.push),b.__super__.disconnect.apply(this,arguments)},b.prototype.startSyncing=function(){return this.hoodie.config.set("_remote.sync",!0),this.hoodie.on("account:signin",this._handleSignIn),this.hoodie.on("account:signout",this.disconnect),b.__super__.startSyncing.apply(this,arguments)},b.prototype.stopSyncing=function(){return this.hoodie.config.set("_remote.sync",!1),this.hoodie.unbind("account:signin",this._handleSignIn),this.hoodie.unbind("account:signout",this.disconnect),b.__super__.stopSyncing.apply(this,arguments)},b.prototype.sync=function(a){return this.isContinuouslyPushing()&&(this.hoodie.unbind("store:idle",this.push),this.hoodie.on("store:idle",this.push)),b.__super__.sync.apply(this,arguments)},b.prototype.getSinceNr=function(a){return this.hoodie.config.get("_remote.since")||0},b.prototype.setSinceNr=function(a){return this.hoodie.config.set("_remote.since",a)},b.prototype.push=function(a){var c;return $.isArray(a)||(a=this.hoodie.store.changedDocs()),c=b.__super__.push.call(this,a)},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1remote:$2"),this.hoodie.on(a,b)},b.prototype.one=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1remote:$2"),this.hoodie.one(a,b)},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["remote:"+a].concat(__slice.call(b)))},b.prototype._handleSignIn=function(){return this.name=this.hoodie.account.db(),this.connect()},b.prototype._handlePushSuccess=function(a,b){var c=this;return function(){var d,e,f,g,h,i,j;j=[];for(e=h=0,i=a.length;h<i;e=++h)d=a[e],g={_rev:b[e]._rev},f={remote:!0},j.push(c.hoodie.store.update(d.$type,d.id,g,f));return j}},b.prototype._handlePullResults=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=this;m=[],d=[];for(e=0,h=a.length;e<h;e++)b=a[e].doc,b=this.store.parseFromRemote(b),b._deleted?m.push([b,this.hoodie.store.remove(b.$type,b.id,{remote:!0})]):d.push([b,this.hoodie.store.save(b.$type,b.id,b,{remote:!0})]);for(f=0,i=m.length;f<i;f++)k=m[f],b=k[0],c=k[1],c.then(function(a){return o.trigger("remove",a),o.trigger("remove:"+b.$type,a),o.trigger("remove:"+b.$type+":"+b.id,a),o.trigger("change","remove",a),o.trigger("change:"+b.$type,"remove",a),o.trigger("change:"+b.$type+":"+b.id,"remove",a)});n=[];for(g=0,j=d.length;g<j;g++)l=d[g],b=l[0],c=l[1],n.push(c.then(function(a,c){var d;d=c?"create":"update",o.trigger(d,a),o.trigger(""+d+":"+b.$type,a),d!=="create"&&o.trigger(""+d+":"+b.$type+":"+b.id,a),o.trigger("change",d,a),o.trigger("change:"+b.$type,d,a);if(d!=="create")return o.trigger("change:"+b.$type+":"+b.id,d,a)}));return n},b}(Hoodie.Remote),Hoodie.LocalStore=function(a){function b(a){this.hoodie=a,this.clear=__bind(this.clear,this),this.markAllAsChanged=__bind(this.markAllAsChanged,this),this.isPersistent()||(this.db={getItem:function(){return null},setItem:function(){return null},removeItem:function(){return null},key:function(){return null},length:0,clear:function(){return null}}),this.hoodie.on("account:signout",this.clear),this.hoodie.on("account:signup",this.markAllAsChanged),this._promiseApi.hoodie=this.hoodie,this._bootstrap()}return __extends(b,a),b.prototype.idleTimeout=2e3,b.prototype.db={getItem:function(a){return window.localStorage.getItem(a)},setItem:function(a,b){return window.localStorage.setItem(a,b)},removeItem:function(a){return window.localStorage.removeItem(a)},key:function(a){return window.localStorage.key(a)},length:function(){return window.localStorage.length},clear:function(){return window.localStorage.clear()}},b.prototype.save=function(a,c,d,e){var f,g,h,i,j;e==null&&(e={}),g=b.__super__.save.apply(this,arguments);if(this.hoodie.isPromise(g))return this._decoratePromise(g);d=$.extend(!0,{},d),c?(f=this.cache(a,c),i=typeof f!="object"):(i=!0,c=this.hoodie.uuid()),i&&this.hoodie.account&&(d.$createdBy||(d.$createdBy=this.hoodie.account.ownerHash));if(!i){delete d.$updatedBy;for(j in f)if(!d.hasOwnProperty(j))switch(j.charAt(0)){case"_":e.remote&&(d[j]=f[j]);break;case"$":e.remote||(d[j]=f[j])}}e.remote?d._$syncedAt=this._now():e.silent||(d.$updatedAt=this._now(),d.$createdAt||(d.$createdAt=d.$updatedAt));try{d=this.cache(a,c,d,e),g.resolve(d,i).promise(),h=i?"add":"update",this._triggerEvents(h,d,e)}catch(k){g.reject(k).promise()}return this._decoratePromise(g.promise())},b.prototype.find=function(a,c){var d,e;d=b.__super__.find.apply(this,arguments);if(this.hoodie.isPromise(d))return this._decoratePromise(d);try{e=this.cache(a,c),e||d.reject(Hoodie.Errors.NOT_FOUND(a,c)).promise(),d.resolve(e)}catch(f){d.reject(f)}return this._decoratePromise(d.promise())},b.prototype.findAll=function(a){var c,d,e,f,g,h,i,j;a==null&&(a=function(){return!0}),d=b.__super__.findAll.apply(this,arguments);if(this.hoodie.isPromise(d))return this._decoratePromise(d);g=this._index(),typeof a=="string"&&(j=a,a=function(a){return a.$type===j});try{i=function(){var b,d,i,j;j=[];for(b=0,d=g.length;b<d;b++){f=g[b];if(!this._isSemanticId(f))continue;i=f.split("/"),c=i[0],e=i[1],h=this.cache(c,e);if(!h||!a(h))continue;j.push(h)}return j}.call(this),d.resolve(i).promise()}catch(k){d.reject(k).promise()}return this._decoratePromise(d.promise())},b.prototype.remove=function(a,c,d){var e,f,g,h;return d==null&&(d={}),e=b.__super__.remove.apply(this,arguments),this.hoodie.isPromise(e)?this._decoratePromise(e):(g=this.cache(a,c),g?(g._$syncedAt&&!d.remote?(g._deleted=!0,this.cache(a,c,g)):(f=""+a+"/"+c,this.db.removeItem(f),this._cached[f]=!1,this.clearChanged(a,c)),this._triggerEvents("remove",g,d),h=e.resolve($.extend(!0,{},g)).promise(),this._decoratePromise(h)):this._decoratePromise(e.reject(Hoodie.Errors.NOT_FOUND(a,c)).promise()))},b.prototype.update=function(){return this._decoratePromise(b.__super__.update.apply(this,arguments))},b.prototype.updateAll=function(){return this._decoratePromise(b.__super__.updateAll.apply(this,arguments))},b.prototype.removeAll=function(){return this._decoratePromise(b.__super__.removeAll.apply(this,arguments))},b.prototype.cache=function(a,b,c,d){var e;c==null&&(c=!1),d==null&&(d={}),e=""+a+"/"+b;if(c){$.extend(!0,c,{$type:a,id:b}),this._setObject(a,b,c);if(d.remote)return this.clearChanged(a,b),this._cached[e]=c,$.extend(!0,{},this._cached[e])}else{if(this._cached[e]===!1)return!1;if(this._cached[e])return $.extend(!0,{},this._cached[e]);c=this._getObject(a,b)}if(c===void 0)return;return c===!1?(this.clearChanged(a,b),this._cached[e]=!1,!1):this._isMarkedAsDeleted(c)?(this.markAsChanged(a,b,c,d),this._cached[e]=!1,!1):(this._cached[e]=c,this._isDirty(c)?this.markAsChanged(a,b,c,d):this.clearChanged(a,b),$.extend(!0,{},this._cached[e]))},b.prototype.clearChanged=function(a,b){var c;return a&&b?(c=""+a+"/"+b,delete this._dirty[c]):this._dirty={},this._saveDirtyIds(),window.clearTimeout(this._dirtyTimeout)},b.prototype.isMarkedAsDeleted=function(a,b){return this._isMarkedAsDeleted(this.cache(a,b))},b.prototype.markAsChanged=function(a,b,c,d){var e;d==null&&(d={}),e=""+a+"/"+b,this._dirty[e]=c,this._saveDirtyIds();if(d.silent)return;return this._trigger_dirty_and_idle_events()},b.prototype.markAllAsChanged=function(){var a=this;return this.findAll().pipe(function(b){var c,d,e,f;for(e=0,f=b.length;e<f;e++)d=b[e],c=""+d.$type+"/"+d.id,a._dirty[c]=d;return a._saveDirtyIds(),a._trigger_dirty_and_idle_events()})},b.prototype.changedDocs=function(){var a,b,c,d,e,f,g;e=this._dirty,g=[];for(b in e)c=e[b],f=b.split("/"),d=f[0],a=f[1],c.$type=d,c.id=a,g.push(c);return g},b.prototype.isDirty=function(a,b){return a?this._isDirty(this.cache(a,b)):$.isEmptyObject(this._dirty)},b.prototype.clear=function(){var a,b,c,d;a=this.hoodie.defer();try{c=this._index(),d=function(){var a,d,e;e=[];for(a=0,d=c.length;a<d;a++)b=c[a],this._isSemanticId(b)&&e.push(this.db.removeItem(b));return e}.call(this),this._cached={},this.clearChanged(),a.resolve(),this.trigger("clear")}catch(e){a.reject(e)}return a.promise()},b.prototype.isPersistent=function(){try{if(!window.localStorage)return!1;localStorage.setItem("Storage-Test","1");if(localStorage.getItem("Storage-Test")!=="1")return!1;localStorage.removeItem("Storage-Test")}catch(a){return!1}return!0},b.prototype.trigger=function(){var a,b,c;return a=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],(c=this.hoodie).trigger.apply(c,["store:"+a].concat(__slice.call(b)))},b.prototype.on=function(a,b){return a=a.replace(/(^| )([^ ]+)/g,"$1store:$2"),this.hoodie.on(a,b)},b.prototype.decoratePromises=function(a){return $.extend(this._promiseApi,a)},b.prototype._bootstrap=function(){var a,b,c,d,e,f,g,h,i;c=this.db.getItem("_dirty");if(!c)return;i=[];for(f=0,g=c.length;f<g;f++)b=c[f],h=b.split("/"),e=h[0],a=h[1],i.push(d=this.cache(e,a));return i},b.prototype._setObject=function(a,b,c){var d,e;return d=""+a+"/"+b,e=$.extend({},c),delete e.$type,delete e.id,this.db.setItem(d,JSON.stringify(e))},b.prototype._getObject=function(a,b){var c,d,e;return d=""+a+"/"+b,c=this.db.getItem(d),c?(e=JSON.parse(c),e.$type=a,e.id=b,e.$createdAt&&(e.$createdAt=new Date(Date.parse(e.$createdAt))),e.$updatedAt&&(e.$updatedAt=new Date(Date.parse(e.$updatedAt))),e._$syncedAt&&(e._$syncedAt=new Date(Date.parse(e._$syncedAt))),e):!1},b.prototype._saveDirtyIds=function(){var a;return $.isEmptyObject(this._dirty)?this.db.removeItem("_dirty"):(a=Object.keys(this._dirty),this.db.setItem("_dirty",a.join(",")))},b.prototype._now=function(){return new Date},b.prototype._isValidId=function(a){return/^[a-z0-9\-]+$/.test(a)},b.prototype._isValidType=function(a){return/^[a-z$][a-z0-9]+$/.test(a)},b.prototype._isSemanticId=function(a){return/^[a-z$][a-z0-9]+\/[a-z0-9]+$/.test(a)},b.prototype._cached={},b.prototype._dirty={},b.prototype._isDirty=function(a){return a.$updatedAt?a._$syncedAt?a._$syncedAt.getTime()<a.$updatedAt.getTime():!0:!1},b.prototype._isMarkedAsDeleted=function(a){return a._deleted===!0},b.prototype._index=function(){var a,b,c,d;d=[];for(a=b=0,c=this.db.length();0<=c?b<c:b>c;a=0<=c?++b:--b)d.push(this.db.key(a));return d},b.prototype._triggerEvents=function(a,b,c){this.trigger(a,b,c),this.trigger(""+a+":"+b.$type,b,c),a!=="new"&&this.trigger(""+a+":"+b.$type+":"+b.id,b,c),this.trigger("change",a,b,c),this.trigger("change:"+b.$type,a,b,c);if(a!=="new")return this.trigger("change:"+b.$type+":"+b.id,a,b,c)},b.prototype._trigger_dirty_and_idle_events=function(){var a=this;return this.trigger("dirty"),window.clearTimeout(this._dirtyTimeout),this._dirtyTimeout=window.setTimeout(function(){return a.trigger("idle")},this.idleTimeout)},b.prototype._promiseApi={},b.prototype._decoratePromise=function(a){return $.extend(a,this._promiseApi)},b}(Hoodie.Store),Hoodie.ShareInstance=function(a){function b(a,c){this.hoodie=a,c==null&&(c={}),this._handleSecurityResponse=__bind(this._handleSecurityResponse,this),this.id=c.id||this.hoodie.uuid(),this.name="share/"+this.id,this.prefix=this.name,c.sync!=null&&(c._sync=c.sync,delete c.sync),$.extend(this,c),b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.access=!1,b.prototype.subscribe=function(){return this.request("GET","/_security").pipe(this._handleSecurityResponse)},b.prototype.unsubscribe=function(){return this.hoodie.share.remove(this.id),this},b.prototype.grantReadAccess=function(a){var b,c,d,e;if(this.access===!0||this.access.read===!0)return this.hoodie.resolveWith(this);typeof a=="string"&&(a=[a]);if(this.access===!1||this.access.read===!1)this.access.read!=null?this.access.read=a||!0:this.access=a||!0;if(a){b=this.access.read||this.access;for(d=0,e=a.length;d<e;d++)c=a[d],b.indexOf(c)===-1&&b.push(c);this.access.read!=null?this.access.read=b:this.access=b}else this.access.read!=null?this.access.read=!0:this.access=!0;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype.revokeReadAccess=function(a){var b,c,d,e,f,g;this.revokeWriteAccess(a);if(this.access===!1||this.access.read===!1)return this.hoodie.resolveWith(this);if(a){if(this.access===!0||this.access.read===!0)return this.hoodie.rejectWith(this);typeof a=="string"&&(a=[a]),c=this.access.read||this.access,b=!1;for(f=0,g=a.length;f<g;f++)e=a[f],d=c.indexOf(e),d!==-1&&(c.splice(d,1),b=!0);if(!b)return this.hoodie.resolveWith(this);c.length===0&&(c=!1),this.access.read!=null?this.access.read=c:this.access=c}else this.access=!1;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype.grantWriteAccess=function(a){return this.grantReadAccess(a),this.access.read==null&&(this.access={read:this.access}),this.access.write===!0?this.hoodie.resolveWith(this):(a?(typeof a=="string"&&(a=[a]),this.access.write=a):this.access.write=!0,this.hoodie.share.update(this.id,{access:this.access}))},b.prototype.revokeWriteAccess=function(a){var b,c,d,e;if(this.access.write==null)return this.hoodie.resolveWith(this);if(a){if(typeof this.access.write=="boolean")return this.hoodie.rejectWith(this);typeof a=="string"&&(a=[a]);for(d=0,e=a.length;d<e;d++)c=a[d],b=this.access.write.indexOf(c),b!==-1&&this.access.write.splice(b,1);this.access.write.length===0&&(this.access=this.access.read)}else this.access=this.access.read;return this.hoodie.share.update(this.id,{access:this.access})},b.prototype._handleSecurityResponse=function(a){var b,c;return c=this._parseSecurity(a),b="$subscription",this.hoodie.share.findOrAdd(this.id,{access:c,$createdBy:b})},b.prototype._parseSecurity=function(a){var b,c,d,e,f;return c=(e=a.members)!=null?e.roles:void 0,d=(f=a.writers)!=null?f.roles:void 0,b={},c!=null&&(b.read=c===!0||c.length===0,c.length&&(b.read=-1!==c.indexOf(this.hoodie.account.ownerHash))),d!=null&&(b.write=d===!0||d.length===0,d.length&&(b.write=-1!==d.indexOf(this.hoodie.account.ownerHash))),b},b}(Hoodie.Remote),this.Handlebars={},function(a){a.VERSION="1.0.rc.1",a.helpers={},a.partials={},a.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},a.registerPartial=function(a,b){this.partials[a]=b},a.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")});var b=Object.prototype.toString,c="[object Function]";a.registerHelper("blockHelperMissing",function(d,e){var f=e.inverse||function(){},g=e.fn,h="",i=b.call(d);return i===c&&(d=d.call(this)),d===!0?g(this):d===!1||d==null?f(this):i==="[object Array]"?d.length>0?a.helpers.each(d,e):f(this):g(d)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.registerHelper("each",function(b,c){var d=c.fn,e=c.inverse,f="",g;c.data&&(g=a.createFrame(c.data));if(b&&b.length>0)for(var h=0,i=b.length;h<i;h++)g&&(g.index=h),f+=d(b[h],{data:g});else f=e(this);return f}),a.registerHelper("if",function(d,e){var f=b.call(d);return f===c&&(d=d.call(this)),!d||a.Utils.isEmpty(d)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){var d=c.fn,e=c.inverse;return c.fn=e,c.inverse=d,a.helpers["if"].call(this,b,c)}),a.registerHelper("with",function(a,b){return b.fn(a)}),a.registerHelper("log",function(b){a.log(b)})}(this.Handlebars),Handlebars.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/[&<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():a==null||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:(d=this.programs[a]=Handlebars.VM.program(b),d)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,f){var g={helpers:d,partials:e,data:f};if(a===undefined)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in runtime-only mode");return e[b]=Handlebars.compile(a,{data:f!==undefined}),e[b](c,g)}},Handlebars.template=Handlebars.VM.template,function(a,b){function fb(a){if(a&&typeof a=="object"&&a.__wrapped__)return a;if(!(this instanceof fb))return new fb(a);this.__wrapped__=a}function jb(a){return a.charCodeAt(0)}function kb(a,b){var c=a.index,d=b.index;a=a.criteria,b=b.criteria;if(a!==b){if(a>b||typeof a=="undefined")return 1;if(a<b||typeof b=="undefined")return-1}return c<d?-1:1}function lb(a,b,c){function d(){var e=arguments,f=b;c.length&&(e=e.length?c.concat(tb(e)):c);if(this instanceof d){sb.prototype=a.prototype,f=new sb,sb.prototype=null;var g=a.apply(f,e);return Pb(g)?g:f}return a.apply(f,e)}return d}function mb(a,b,c){return a?typeof a!="function"?function(b){return b[a]}:typeof b!="undefined"?c?function(c,d,e,f){return a.call(b,c,d,e,f)}:function(c,d,e){return a.call(b,c,d,e)}:a:Xc}function nb(){var a={arrayLoop:"",bottom:"",hasDontEnumBug:hasDontEnumBug,objectLoop:"",nonEnumArgs:nonEnumArgs,noCharByIndex:ab,shadowed:w,top:"",useHas:!0};for(var b,c=0;b=arguments[c];c++)for(var d in b)a[d]=b[d];var e=a.args;a.firstArg=/^[^,]+/.exec(e)[0];var f=Function("createCallback, hasOwnProperty, isString, objectTypes, nativeKeys, propertyIsEnumerable","return function("+e+") {\n"+a+"\n}");return f(mb,C,Ub,db,K,E)}function pb(a){return"\\"+eb[a]}function qb(a){return Ab[a]}function rb(a){return typeof a.toString!="function"&&typeof (a+"")=="string"}function sb(){}function tb(a,b,c){b||(b=0),typeof c=="undefined"&&(c=a?a.length:0);var d=-1,e=c-b||0,f=Array(e<0?0:e);while(++d<e)f[d]=a[b+d];return f}function ub(a){return Bb[a]}function vb(a){if(!a)return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];if(d)for(var e in d)a[e]=d[e]}return a}function yb(a){var b=!1;if(!a||typeof a!="object"||isArguments(a))return b;var c=a.constructor;return!Ob(c)||c instanceof c?(wb(a,function(a,c){b=c}),b===!1||C.call(a,b)):b}function zb(a){var b=[];return xb(a,function(a,c){b.push(c)}),b}function Cb(a){return a&&db[typeof a]?Hb(a)?tb(a):vb({},a):a}function Db(a){if(!a)return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];if(d)for(var e in d)a[e]==null&&(a[e]=d[e])}return a}function Eb(a){var b=[];return wb(a,function(a,c){Ob(a)&&b.push(c)}),b.sort()}function Fb(a,b){return a?C.call(a,b):!1}function Gb(a){var b={};return xb(a,function(a,c){b[a]=c}),b}function Ib(a){return a===!0||a===!1||F.call(a)==Q}function Jb(a){return a instanceof Date||F.call(a)==R}function Kb(a){return a?a.nodeType===1:!1}function Lb(a){if(!a)return!0;if(Hb(a)||Ub(a))return!a.length;for(var b in a)if(C.call(a,b))return!1;return!0}function Mb(a,b,c,d){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;var e=F.call(a),f=F.call(b);if(e!=f)return!1;switch(e){case Q:case R:return+a==+b;case T:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case V:case W:return a==b+""}var g=e==P;if(!g){if(a.__wrapped__||b.__wrapped__)return Mb(a.__wrapped__||a,b.__wrapped__||b);if(e!=U)return!1;var i=a.constructor,j=b.constructor;if(i!=j&&!(Ob(i)&&i instanceof i&&Ob(j)&&j instanceof j))return!1}c||(c=[]),d||(d=[]);var k=c.length;while(k--)if(c[k]==a)return d[k]==b;var l=-1,m=!0,n=0;c.push(a),d.push(b);if(g){n=a.length,m=n==b.length;if(m)while(n--)if(!(m=Mb(a[n],b[n],c,d)))break;return m}return wb(a,function(a,e,f){if(C.call(f,e))return n++,!(m=C.call(b,e)&&Mb(a,b[e],c,d))&&h}),m&&wb(b,function(a,b,c){if(C.call(c,b))return!(m=--n>-1)&&h}),m}function Nb(a){return I(a)&&!J(parseFloat(a))}function Ob(a){return typeof a=="function"}function Pb(a){return a?db[typeof a]:!1}function Qb(a){return Sb(a)&&a!=+a}function Rb(a){return a===null}function Sb(a){return typeof a=="number"||F.call(a)==T}function Tb(a){return a instanceof RegExp||F.call(a)==V}function Ub(a){return typeof a=="string"||F.call(a)==W}function Vb(a){return typeof a=="undefined"}function Xb(a){var b=z.apply(e,arguments),c={};return wb(a,function(a,d){yc(b,d,1)<0&&(c[d]=a)}),c}function Yb(a){var b=[];return xb(a,function(a,c){b.push([c,a])}),b}function Zb(a){var b=0,c=z.apply(e,arguments),d=c.length,f={};while(++b<d){var g=c[b];g in a&&(f[g]=a[g])}return f}function $b(a){var b=[];return xb(a,function(a){b.push(a)}),b}function _b(a,b){var c=a?a.length:0,d=!1;return typeof c=="number"?d=yc(a,b)>-1:ob(a,function(a){return(d=a===b)&&h}),d}function ac(a,b,c){var d={};return b=mb(b,c),ec(a,function(a,c,e){c=b(a,c,e),C.call(d,c)?d[c]++:d[c]=1}),d}function bc(a,b,c){var d=!0;b=mb(b,c);if(Hb(a)){var e=-1,f=a.length;while(++e<f)if(!(d=!!b(a[e],e,a)))break}else ob(a,function(a,c,e){return!(d=!!b(a,c,e))&&h});return d}function cc(a,b,c){var d=[];b=mb(b,c);if(Hb(a)){var e=-1,f=a.length;while(++e<f){var g=a[e];b(g,e,a)&&d.push(g)}}else ob(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function dc(a,b,c){var d;return b=mb(b,c),ec(a,function(a,c,e){if(b(a,c,e))return d=a,h}),d}function ec(a,b,c){if(b&&typeof c=="undefined"&&Hb(a)){var d=-1,e=a.length;while(++d<e)if(b(a[d],d,a)===h)break}else ob(a,b,c)}function fc(a,b,c){var d={};return b=mb(b,c),ec(a,function(a,c,e){c=b(a,c,e),(C.call(d,c)?d[c]:d[c]=[]).push(a)}),d}function gc(a,b){var c=tb(arguments,2),d=typeof b=="function",e=[];return ec(a,function(a){e.push((d?b:a[b]).apply(a,c))}),e}function hc(a,b,c){var d=-1,e=a?a.length:0,f=Array(typeof e=="number"?e:0);b=mb(b,c);if(Hb(a))while(++d<e)f[d]=b(a[d],d,a);else ob(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function ic(a,b,c){var d=-Infinity,e=-1,f=a?a.length:0,g=d;if(b||!Hb(a))b=mb(b,c),ob(a,function(a,c,e){var f=b(a,c,e);f>d&&(d=f,g=a)});else while(++e<f)a[e]>g&&(g=a[e]);return g}function jc(a,b,c){var d=Infinity,e=-1,f=a?a.length:0,g=d;if(b||!Hb(a))b=mb(b,c),ob(a,function(a,c,e){var f=b(a,c,e);f<d&&(d=f,g=a)});else while(++e<f)a[e]<g&&(g=a[e]);return g}function kc(a,b){return hc(a,b+"")}function lc(a,b,c,d){var e=arguments.length<3;b=mb(b,d,h);if(Hb(a)){var f=-1,g=a.length;e&&(c=a[++f]);while(++f<g)c=b(c,a[f],f,a)}else ob(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function mc(a,b,c,d){var e=a,f=a?a.length:0,g=arguments.length<3;if(typeof f!="number"){var i=Wb(a);f=i.length}return b=mb(b,d,h),ec(a,function(a,d,h){d=i?i[--f]:--f,c=g?(g=!1,e[d]):b(c,e[d],d,h)}),c}function nc(a,b,c){return b=mb(b,c),cc(a,function(a,c,d){return!b(a,c,d)})}function oc(a){var b=-1,c=Array(a?a.length:0);return ec(a,function(a){var d=A(N()*(++b+1));c[b]=c[d],c[d]=a}),c}function pc(a){var b=a?a.length:0;return typeof b=="number"?b:Wb(a).length}function qc(a,b,c){var d;b=mb(b,c);if(Hb(a)){var e=-1,f=a.length;while(++e<f)if(d=b(a[e],e,a))break}else ob(a,function(a,c,e){return(d=b(a,c,e))&&h});return!!d}function rc(a,b,c){var d=[];b=mb(b,c),ec(a,function(a,c,e){d.push({criteria:b(a,c,e),index:c,value:a})});var e=d.length;d.sort(kb);while(e--)d[e]=d[e].value;return d}function sc(a){var b=a?a.length:0;return typeof b=="number"?tb(a):$b(a)}function tc(a,b){var c=Wb(b);return cc(a,function(a){var d=c.length;while(d--){var e=a[c[d]]===b[c[d]];if(!e)break}return!!e})}function uc(a){var b=-1,c=a?a.length:0,d=[];while(++b<c){var e=a[b];e&&d.push(e)}return d}function vc(a){var b=-1,c=a.length,d=z.apply(e,arguments),f=[];while(++b<c){var g=a[b];yc(d,g,c)<0&&f.push(g)}return f}function wc(a,b,c){if(a){var d=a.length;return b==null||c?a[0]:tb(a,0,M(L(0,b),d))}}function xc(a,b){var c=-1,d=a?a.length:0,e=[];while(++c<d){var f=a[c];Hb(f)?D.apply(e,b?f:xc(f)):e.push(f)}return e}function yc(a,b,c){var d=-1,e=a?a.length:0;if(typeof c=="number")d=(c<0?L(0,e+c):c||0)-1;else if(c)return d=Gc(a,b),a[d]===b?d:-1;while(++d<e)if(a[d]===b)return d;return-1}function zc(a,b,c){if(!a)return[];var d=a.length;return b=b==null||c?1:b||0,tb(a,0,M(L(0,d-b),d))}function Ac(a){var b=arguments,c=b.length,d=-1,e=a?a.length:0,f=[];a:while(++d<e){var g=a[d];if(yc(f,g)<0){var h=c;while(--h)if(yc(b[h],g)<0)continue a;f.push(g)}}return f}function Bc(a,b,c){if(a){var d=a.length;return b==null||c?a[d-1]:tb(a,L(0,d-b))}}function Cc(a,b,c){var d=a?a.length:0;typeof c=="number"&&(d=(c<0?L(0,d+c):M(c,d-1))+1);while(d--)if(a[d]===b)return d;return-1}function Dc(a,b){var c=-1,d=a?a.length:0,e={};while(++c<d){var f=a[c];b?e[f]=b[c]:e[f[0]]=f[1]}return e}function Ec(a,b,c){a=+a||0,c=+c||1,b==null&&(b=a,a=0);var d=-1,e=L(0,y((b-a)/c)),f=Array(e);while(++d<e)f[d]=a,a+=c;return f}function Fc(a,b,c){return tb(a,b==null||c?1:L(0,b))}function Gc(a,b,c,d){var e=0,f=a?a.length:e;c=c?mb(c,d):Xc,b=c(b);while(e<f){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Hc(){return Ic(z.apply(e,arguments))}function Ic(a,b,c,d){var e=-1,f=a?a.length:0,g=[],h=g;typeof b=="function"&&(d=c,c=b,b=!1),c&&(h=[],c=mb(c,d));while(++e<f){var i=a[e],j=c?c(i,e,a):i;if(b?!e||h[h.length-1]!==j:yc(h,j)<0)c&&h.push(j),g.push(i)}return g}function Jc(a){var b=-1,c=a.length,d=[];while(++b<c){var e=a[b];yc(arguments,e,1)<0&&d.push(e)}return d}function Kc(a){var b=-1,c=a?ic(kc(arguments,"length")):0,d=Array(c);while(++b<c)d[b]=kc(arguments,b);return d}function Lc(a,b){return a<1?b():function(){if(--a<1)return b.apply(this,arguments)}}function Mc(a,b){return Z||G&&arguments.length>2?G.call.apply(G,arguments):lb(a,b,tb(arguments,2))}function Nc(a){var b=arguments,c=b.length>1?0:(b=Eb(a),-1),d=b.length;while(++c<d){var e=b[c];a[e]=Mc(a[e],a)}return a}function Oc(){var a=arguments;return function(){var b=arguments,c=a.length;while(c--)b=[a[c].apply(this,b)];return b[0]}}function Pc(a,b,c){function h(){g=null,c||(e=a.apply(f,d))}var d,e,f,g;return function(){var i=c&&!g;return d=arguments,f=this,clearTimeout(g),g=setTimeout(h,b),i&&(e=a.apply(f,d)),e}}function Qc(a,c){var d=tb(arguments,2);return setTimeout(function(){a.apply(b,d)},c)}function Rc(a){var c=tb(arguments,1);return setTimeout(function(){a.apply(b,c)},1)}function Sc(a,b){var c={};return function(){var d=b?b.apply(this,arguments):arguments[0];return C.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}function Tc(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}function Uc(a,b){function h(){g=new Date,f=null,d=a.apply(e,c)}var c,d,e,f,g=0;return function(){var i=new Date,j=b-(i-g);return c=arguments,e=this,j<=0?(clearTimeout(f),f=null,g=i,d=a.apply(e,c)):f||(f=setTimeout(h,j)),d}}function Vc(a,b){return function(){var c=[a];return D.apply(c,arguments),b.apply(this,c)}}function Wc(a){return a==null?"":(a+"").replace(u,qb)}function Xc(a){return a}function Yc(a){ec(Eb(a),function(b){var c=fb[b]=a[b];fb.prototype[b]=function(){var a=[this.__wrapped__];D.apply(a,arguments);var b=c.apply(fb,a);return this.__chain__&&(b=new fb(b),b.__chain__=!0),b}})}function Zc(){return a._=i,this}function $c(a,b){return a==null&&b==null&&(b=1),a=+a||0,b==null&&(b=a,a=0),a+A(N()*((+b||0)-a+1))}function _c(a,b){var c=a?a[b]:null;return Ob(c)?a[b]():c}function ad(a,b,c){a||(a=""),c=Db({},c,fb.templateSettings);var d=0,e="__p += '",f=c.variable,g=RegExp((c.escape||t).source+"|"+(c.interpolate||t).source+"|"+(c.evaluate||t).source+"|$","g");a.replace(g,function(b,c,f,g,h){e+=a.slice(d,h).replace(v,pb),e+=c?"' +\n_.escape("+c+") +\n'":g?"';\n"+g+";\n__p += '":f?"' +\n((__t = ("+f+")) == null ? '' : __t) +\n'":"",d=h+b.length}),e+="';\n",f||(f="obj",e="with ("+f+" || {}) {\n"+e+"\n}\n"),e="function("+f+") {\n"+"var __t, __p = '', __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n"+e+"return __p\n}";try{var h=Function("_","return "+e)(fb)}catch(i){throw i.source=e,i}return b?h(b):(h.source=e,h)}function bd(a,b,c){a=+a||0;var d=-1,e=Array(a);while(++d<a)e[d]=b.call(c,d);return e}function cd(a){return a==null?"":(a+"").replace(k,ub)}function dd(a){var b=++g+"";return a?a+b:b}function ed(a){return a=new fb(a),a.__chain__=!0,a}function fd(a,b){return b(a),a}function gd(){return this.__chain__=!0,this}function hd(){return this.__wrapped__+""}function id(){return this.__wrapped__}var c=typeof exports=="object"&&exports,d=typeof global=="object"&&global;d.global===d&&(a=d);var e=[],f=new function(){},g=0,h=f,i=a._,j=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,k=/&(?:amp|lt|gt|quot|#x27);/g,l=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,n=/(__e\(.*?\)|\b__t\)) \+\n'';/g,o=/\w*$/,p=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,q=RegExp("^"+(f.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),r=/\$\{((?:(?=\\?)\\?[\s\S])*?)}/g,s=/<%=([\s\S]+?)%>/g,t=/($^)/,u=/[&<>"']/g,v=/['\n\r\t\u2028\u2029\\]/g,w=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],x=0,y=Math.ceil,z=e.concat,A=Math.floor,B=q.test(B=Object.getPrototypeOf)&&B,C=f.hasOwnProperty,D=e.push,E=f.propertyIsEnumerable,F=f.toString,G=q.test(G=tb.bind)&&G,H=q.test(H=Array.isArray)&&H,I=a.isFinite,J=a.isNaN,K=q.test(K=Object.keys)&&K,L=Math.max,M=Math.min,N=Math.random,O="[object Arguments]",P="[object Array]",Q="[object Boolean]",R="[object Date]",S="[object Function]",T="[object Number]",U="[object Object]",V="[object RegExp]",W="[object String]",X=!!a.attachEvent,Y=G&&!/\n|true/.test(G+X),Z=G&&!Y,$=($={0:1,length:1},e.splice.call($,0,1),$[0]),_=arguments.constructor==Object,ab="x"[0]+Object("x")[0]!="xx";try{var bb=(Function("//@")(),!X)}catch(cb){}var db={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},eb={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};fb.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:s,variable:""};var gb={args:"object, source, guard",top:"for (var argsIndex = 1, argsLength = typeof guard == 'number' ? 2 : arguments.length; argsIndex < argsLength; argsIndex++) {\n  if ((iteratee = arguments[argsIndex])) {",objectLoop:"result[index] = iteratee[index]",bottom:"  }\n}"},hb={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : createCallback(callback, thisArg)",arrayLoop:"if (callback(iteratee[index], index, collection) === false) return result",objectLoop:"if (callback(iteratee[index], index, collection) === false) return result"},ib={arrayLoop:null},ob=function(a,b,c){var d,e=a,f=a;if(!a)return f;b=b&&typeof c=="undefined"?b:mb(b,c);var g=e.length;d=-1;if(typeof g=="number"){while(++d<g)if(b(e[d],d,a)===h)return f}else for(d in e)if(C.call(e,d)&&b(e[d],d,a)===h)return f};fb.isArguments=function(a){return F.call(a)==O},fb.isArguments(arguments)||(fb.isArguments=function(a){return a?C.call(a,"callee"):!1});var wb=function(a,b){var c,d=a,e=a;if(!a)return e;b||(b=Xc);for(c in d)if(b(d[c],c,a)===h)return e;return e},xb=function(a,b){var c,d=a,e=a;if(!a)return e;b||(b=Xc);for(c in d)if(C.call(d,c)&&b(d[c],c,a)===h)return e;return e},Ab={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Bb=Gb(Ab),Hb=H||function(a){return _&&a instanceof Array||F.call(a)==P};Ob(/x/)&&(Ob=function(a){return a instanceof Function||F.call(a)==S});var Wb=K?function(a){return Pb(a)?K(a):[]}:zb;fb.after=Lc,fb.bind=Mc,fb.bindAll=Nc,fb.compact=uc,fb.compose=Oc,fb.countBy=ac,fb.debounce=Pc,fb.defaults=Db,fb.defer=Rc,fb.delay=Qc,fb.difference=vc,fb.filter=cc,fb.flatten=xc,fb.forEach=ec,fb.functions=Eb,fb.groupBy=fc,fb.initial=zc,fb.intersection=Ac,fb.invert=Gb,fb.invoke=gc,fb.keys=Wb,fb.map=hc,fb.max=ic,fb.memoize=Sc,fb.min=jc,fb.object=Dc,fb.omit=Xb,fb.once=Tc,fb.pairs=Yb,fb.pick=Zb,fb.pluck=kc,fb.range=Ec,fb.reject=nc,fb.rest=Fc,fb.shuffle=oc,fb.sortBy=rc,fb.tap=fd,fb.throttle=Uc,fb.times=bd,fb.toArray=sc,fb.union=Hc,fb.uniq=Ic,fb.values=$b,fb.where=tc,fb.without=Jc,fb.wrap=Vc,fb.zip=Kc,fb.collect=hc,fb.drop=Fc,fb.each=ec,fb.extend=vb,fb.methods=Eb,fb.select=cc,fb.tail=Fc,fb.unique=Ic,fb.clone=Cb,fb.contains=_b,fb.escape=Wc,fb.every=bc,fb.find=dc,fb.has=Fb,fb.identity=Xc,fb.indexOf=yc,fb.isArray=Hb,fb.isBoolean=Ib,fb.isDate=Jb,fb.isElement=Kb,fb.isEmpty=Lb,fb.isEqual=Mb,fb.isFinite=Nb,fb.isFunction=Ob,fb.isNaN=Qb,fb.isNull=Rb,fb.isNumber=Sb,fb.isObject=Pb,fb.isRegExp=Tb,fb.isString=Ub,fb.isUndefined=Vb,fb.lastIndexOf=Cc,fb.mixin=Yc,fb.noConflict=Zc,fb.random=$c,fb.reduce=lc,fb.reduceRight=mc,fb.result=_c,fb.size=pc,fb.some=qc,fb.sortedIndex=Gc,fb.template=ad,fb.unescape=cd,fb.uniqueId=dd,fb.all=bc,fb.any=qc,fb.detect=dc,fb.foldl=lc,fb.foldr=mc,fb.include=_b,fb.inject=lc,fb.first=wc,fb.last=Bc,fb.take=wc,fb.head=wc,fb.chain=ed,fb.VERSION="1.0.0-rc.3",Yc(fb),fb.prototype.chain=gd,fb.prototype.value=id,ob(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=e[a];fb.prototype[a]=function(){var a=this.__wrapped__;return b.apply(a,arguments),$&&a.length===0&&delete a[0],this}}),ob(["concat","join","slice"],function(a){var b=e[a];fb.prototype[a]=function(){var a=this.__wrapped__,c=b.apply(a,arguments);return this.__chain__&&(c=new fb(c),c.__chain__=!0),c}}),c?typeof module=="object"&&module&&module.exports==c?(module.exports=fb)._=fb:c._=fb:a._=fb}(this),function(){var a=this,b=a.Backbone,c=[],d=c.push,e=c.slice,f=c.splice,g;typeof exports!="undefined"?g=exports:g=a.Backbone={},g.VERSION="0.9.10";var h=a._;!h&&typeof require!="undefined"&&(h=require("underscore")),g.$=a.jQuery||a.Zepto||a.ender,g.noConflict=function(){return a.Backbone=b,this},g.emulateHTTP=!1,g.emulateJSON=!1;var i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if(typeof c=="object")for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else{if(!i.test(c))return!0;var f=c.split(i);for(var g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d))}},k=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:while(++d<e)(c=a[d]).callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b)}},l=g.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!j(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c),this},off:function(a,b,c){var d,e,f,g,i,k,l,m;if(!this._events||!j(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;g=a?[a]:h.keys(this._events);for(i=0,k=g.length;i<k;i++){a=g[i];if(d=this._events[a]){f=[];if(b||c)for(l=0,m=d.length;l<m;l++)e=d[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&f.push(e);this._events[a]=f}}return this},trigger:function(a){if(!this._events)return this;var b=e.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},listenTo:function(a,b,c){var d=this._listeners||(this._listeners={}),e=a._listenerId||(a._listenerId=h.uniqueId("l"));return d[e]=a,a.on(b,typeof b=="object"?this:c,this),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return;if(a)a.off(b,typeof b=="object"?this:c,this),!b&&!c&&delete d[a._listenerId];else{typeof b=="object"&&(c=this);for(var e in d)d[e].off(b,c,this);this._listeners={}}return this}};l.bind=l.on,l.unbind=l.off,h.extend(g,l);var m=g.Model=function(a,b){var c,d=a||{};this.cid=h.uniqueId("c"),this.attributes={},b&&b.collection&&(this.collection=b.collection),b&&b.parse&&(d=this.parse(d,b)||{});if(c=h.result(this,"defaults"))d=h.defaults({},d,c);this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};h.extend(m.prototype,l,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return h.clone(this.attributes)},sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return this.get(a)!=null},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(a==null)return this;typeof a=="object"?(e=a,c=b):(e={})[a]=b,c||(c={});if(!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;m<n;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)while(this._pending)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return a==null?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a){if(h.isEqual(d[e],b=a[e]))continue;(c||(c={}))[e]=b}return c},previous:function(a){return a==null||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},a.parse===void 0&&(a.parse=!0);var b=a.success;return a.success=function(a,c,d){if(!a.set(a.parse(c,d),d))return!1;b&&b(a,c,d)},this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g,i=this.attributes;return a==null||typeof a=="object"?(d=a,c=b):(d={})[a]=b,d&&(!c||!c.wait)&&!this.set(d,c)?!1:(c=h.extend({validate:!0},c),this._validate(d,c)?(d&&c.wait&&(this.attributes=h.extend({},i,d)),c.parse===void 0&&(c.parse=!0),e=c.success,c.success=function(a,b,c){a.attributes=i;var f=a.parse(b,c);c.wait&&(f=h.extend(d||{},f));if(h.isObject(f)&&!a.set(f,c))return!1;e&&e(a,b,c)},f=this.isNew()?"create":c.patch?"patch":"update",f==="patch"&&(c.attrs=d),g=this.sync(f,this,c),d&&c.wait&&(this.attributes=i),g):!1)},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(a,b,e){(e.wait||a.isNew())&&d(),c&&c(a,b,e)};if(this.isNew())return a.success(this,null,a),!1;var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||F();return this.isNew()?a:a+(a.charAt(a.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(a){return!this.validate||!this.validate(this.attributes,a)},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,b||{}),!1):!0}});var n=g.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator!==void 0&&(this.comparator=b.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))};h.extend(n.prototype,l,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,e,g,i,j,k,l,m,n,o;l=[],m=b.at,n=this.comparator&&m==null&&b.sort!=0,o=h.isString(this.comparator)?this.comparator:null;for(c=0,e=a.length;c<e;c++){if(!(g=this._prepareModel(i=a[c],b))){this.trigger("invalid",this,i,b);continue}if(j=this.get(g)){b.merge&&(j.set(i===g?g.attributes:i,b),n&&!k&&j.hasChanged(o)&&(k=!0));continue}l.push(g),g.on("all",this._onModelEvent,this),this._byId[g.cid]=g,g.id!=null&&(this._byId[g.id]=g)}l.length&&(n&&(k=!0),this.length+=l.length,m!=null?f.apply(this.models,[m,0].concat(l)):d.apply(this.models,l)),k&&this.sort({silent:!0});if(b.silent)return this;for(c=0,e=l.length;c<e;c++)(g=l[c]).trigger("add",g,this,b);return k&&this.trigger("sort",this,b),this},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;c<d;c++){f=this.get(a[c]);if(!f)continue;delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f)}return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return a==null?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[a.id||a.cid||a[this._idAttr]||a])},at:function(a){return this.models[a]},where:function(a){return h.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return h.invoke(this.models,"get",a)},update:function(a,b){b=h.extend({add:!0,merge:!0,remove:!0},b),b.parse&&(a=this.parse(a,b));var c,d,e,f,g=[],i=[],j={};h.isArray(a)||(a=a?[a]:[]);if(b.add&&!b.remove)return this.add(a,b);for(d=0,e=a.length;d<e;d++)c=a[d],f=this.get(c),b.remove&&f&&(j[f.cid]=!0),(b.add&&!f||b.merge&&f)&&g.push(c);if(b.remove)for(d=0,e=this.models.length;d<e;d++)c=this.models[d],j[c.cid]||i.push(c);return i.length&&this.remove(i,b),g.length&&this.add(g,b),this},reset:function(a,b){b||(b={}),b.parse&&(a=this.parse(a,b));for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);return b.previousModels=this.models.slice(),this._reset(),a&&this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?h.clone(a):{},a.parse===void 0&&(a.parse=!0);var b=a.success;return a.success=function(a,c,d){var e=d.update?"update":"reset";a[e](c,d),b&&b(a,c,d)},this.sync("read",this,a)},create:function(a,b){b=b?h.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(a,b,e){e.wait&&c.add(a,e),d&&d(a,b,e)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:!1},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if((a==="add"||a==="remove")&&c!==this)return;a==="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],b.id!=null&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)}});var o=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(o,function(a){n.prototype[a]=function(){var b=e.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var p=["groupBy","countBy","sortBy"];h.each(p,function(a){n.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var q=g.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},r=/\((.*?)\)/g,s=/(\(\?)?:\w+/g,t=/\*\w+/g,u=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(q.prototype,l,{initialize:function(){},route:function(a,b,c){return h.isRegExp(a)||(a=this._routeToRegExp(a)),c||(c=this[b]),g.history.route(a,h.bind(function(d){var e=this._extractParameters(a,d);c&&c.apply(this,e),this.trigger.apply(this,["route:"+b].concat(e)),this.trigger("route",b,e),g.history.trigger("route",this,b,e)},this)),this},navigate:function(a,b){return g.history.navigate(a,b),this},_bindRoutes:function(){if(!this.routes)return;var a,b=h.keys(this.routes);while((a=b.pop())!=null)this.route(a,this.routes[a])},_routeToRegExp:function(a){return a=a.replace(u,"\\$&").replace(r,"(?:$1)?").replace(s,function(a,b){return b?a:"([^/]+)"}).replace(t,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var v=g.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},w=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,y=/msie [\w.]+/,z=/\/$/;v.started=!1,h.extend(v.prototype,l,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(a==null)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(z,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(w,"")},start:function(a){if(v.started)throw new Error("Backbone.history has already been started");v.started=!0,this.options=h.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var b=this.getFragment(),c=document.documentMode,d=y.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7);this.root=("/"+this.root+"/").replace(x,"/"),d&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?g.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!d?g.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=b;var e=this.location,f=e.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!f)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&f&&e.hash&&(this.fragment=this.getHash().replace(w,""),this.history.replaceState({},document.title,this.root+this.fragment+e.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),v.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe)));if(b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0});return c},navigate:function(a,b){if(!v.started)return!1;if(!b||b===!0)b={trigger:b};a=this.getFragment(a||"");if(this.fragment===a)return;this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),g.history=new v;var A=g.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},B=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];h.extend(A.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof g.$?a:g.$(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return;this.undelegateEvents();for(var b in a){var c=a[b];h.isFunction(c)||(c=this[a[b]]);if(!c)throw new Error('Method "'+a[b]+'" does not exist');var d=b.match(B),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,f===""?this.$el.on(e,c):this.$el.on(e,f,c)}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,C)),this.options=a},_ensureElement:function(){if(!this.el){var a=h.extend({},h.result(this,"attributes"));this.id&&(a.id=h.result(this,"id")),this.className&&(a["class"]=h.result(this,"className"));var b=g.$("<"+h.result(this,"tagName")+">").attr(a);this.setElement(b,!1)}else this.setElement(h.result(this,"el"),!1)}});var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=D[a];h.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var e={type:d,dataType:"json"};c.url||(e.url=h.result(b,"url")||F()),c.data==null&&b&&(a==="create"||a==="update"||a==="patch")&&(e.contentType="application/json",e.data=JSON.stringify(c.attrs||b.toJSON(c))),c.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{});if(c.emulateHTTP&&(d==="PUT"||d==="DELETE"||d==="PATCH")){e.type="POST",c.emulateJSON&&(e.data._method=d);var f=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(f)return f.apply(this,arguments)}}e.type!=="GET"&&!c.emulateJSON&&(e.processData=!1);var i=c.success;c.success=function(a){i&&i(b,a,c),b.trigger("sync",b,a,c)};var j=c.error;c.error=function(a){j&&j(b,a,c),b.trigger("error",b,a,c)};var k=c.xhr=g.ajax(h.extend(e,c));return b.trigger("request",b,k,c),k},g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var E=function(a,b){var c=this,d;a&&h.has(a,"constructor")?d=a.constructor:d=function(){return c.apply(this,arguments)},h.extend(d,c,b);var e=function(){this.constructor=d};return e.prototype=c.prototype,d.prototype=new e,a&&h.extend(d.prototype,a),d.__super__=c.prototype,d};m.extend=n.extend=q.extend=A.extend=v.extend=E;var F=function(){throw new Error('A "url" property or function must be specified')}}.call(this),function(a){"use strict";var b,c=a.Backbone,d=a._,e=a.$,f=c.View.prototype._configure,g=c.View.prototype.render,h=Array.prototype.push,i=Array.prototype.concat,j=Array.prototype.splice,k=c.View.extend({constructor:function(b){b=b||{},k.setupView(this,b),c.View.call(this,b)},insertView:function(a,b){return b?this.setView(a,b,!0):this.setView(a,!0)},insertViews:function(a){return d.isArray(a)?this.setViews({"":a}):(d.each(a,function(b,c){a[c]=d.isArray(b)?b:[b]}),this.setViews(a))},getView:function(a){return typeof a!="function"&&typeof a!="string"&&(a=arguments[1]),this.getViews(a).first().value()},getViews:function(a){var b=d.chain(this.views).map(function(a){return d.isArray(a)?a:[a]},this).flatten().value();return typeof a=="string"?d.chain([this.views[a]]).flatten():typeof a=="object"?d.chain([d.where(b,a)]).flatten():d.chain(typeof a=="function"?d.filter(b,a):b)},removeView:function(a){return this.getViews(a).each(function(a){a.remove()})},setView:function(a,b,c){var e,f,g,h=this;typeof a!="string"&&(c=b,b=a,a=""),this.views=this.views||{},e=b.__manager__,f=this.views[a];if(!e)throw new Error("Please set `View#manage` property with selector '"+a+"' to `true`.");return g=b.getAllOptions(),e.parent=h,e.selector=a,b.on("all",function(a){a!=="beforeRender"&&a!=="afterRender"&&h.trigger.apply(h,arguments)},b),c?(this.views[a]=i.call([],f||[],b),e.insert=!0,b):(e.hasRendered&&g.partial(h.$el,b.$el,h.__manager__,e),f&&d.each(i.call([],f),function(a){a.remove()}),this.views[a]=b)},setViews:function(a){return d.each(a,function(a,b){if(d.isArray(a))return d.each(a,function(a){this.insertView(b,a)},this);this.setView(b,a)},this),this},render:function(){function i(){function i(){var c=b.afterRender;c&&c.call(a,a),a.trigger("afterRender",a)}var d,h;return e&&(b.contains(e.el,a.el)||b.partial(e.$el,a.$el,f,c)),a.delegateEvents(),c.hasRendered=!0,(d=c.queue.shift())?d():delete c.queue,f&&f.queue?e.once("afterRender",i):i(),g.resolveWith(a,[a])}function j(){var b=a.getAllOptions(),c=a.__manager__,e=c.parent,f=e&&e.__manager__;a._render(k._viewRender,b).done(function(){if(!d.keys(a.views).length)return i();var c=d.map(a.views,function(a){var b=d.isArray(a);return b&&a.length?d.reduce(a.slice(1),function(a,b){return a.then(function(){return b.render()})},a[0].render()):b?a:a.render()});b.when(c).done(i)})}var a=this,b=a.getAllOptions(),c=a.__manager__,e=c.parent,f=e&&e.__manager__,g=b.deferred();return c.queue?h.call(c.queue,j):(c.queue=[],j(a,g)),g.view=a,g},remove:function(){return k._removeView(this,!0),this._remove.apply(this,arguments)},getAllOptions:function(){return d.extend({},this,k.prototype.options,this.options)}},{_cache:{},_makeAsync:function(a,b){var c=a.deferred();return c.async=function(){return c._isAsync=!0,b},c},_viewRender:function(a,b){function h(c){c&&(g.noel?a.setElement(c,!1):b.html(a.$el,c)),f.resolveWith(a,[a])}function i(a,d){var e,f=k._makeAsync(b,function(a){h(a)});k.cache(c,d),d&&(e=b.render.call(f,d,a)),f._isAsync||h(e)}var c,e,f,g=a.__manager__;return{render:function(){var g=a.serialize||b.serialize,h=a.template||b.template;return d.isFunction(g)&&(g=g.call(a)),f=k._makeAsync(b,function(a){i(g,a)}),typeof h=="string"&&(c=b.prefix+h),(e=k.cache(c))?(i(g,e,c),f):(typeof h=="string"?e=b.fetch.call(f,b.prefix+h):typeof h=="function"?e=h:h!=null&&(e=b.fetch.call(f,h)),f._isAsync||i(g,e),f)}}},_removeViews:function(a,b){var c;typeof a=="boolean"&&(b=a,a=this),a=a||this,a.getViews().each(function(a){(a.__manager__.hasRendered||b)&&k._removeView(a,b)})},_removeView:function(a,b){var c,e=a.__manager__,f=typeof a.keep=="boolean"?a.keep:a.options.keep;if(!f&&(e.insert===!0||b)){k.cleanViews(a),a._removeViews(!0),a.$el.remove();if(!e.parent)return;c=e.parent.views[e.selector];if(d.isArray(c))return d.each(d.clone(c),function(a,b){a&&a.__manager__===e&&j.call(c,b,1)});delete e.parent.views[e.selector]}},cache:function(a,b){if(a in this._cache&&b==null)return this._cache[a];if(a!=null&&b!=null)return this._cache[a]=b},cleanViews:function(a){d.each(i.call([],a),function(a){a.unbind(),a.model instanceof c.Model&&a.model.off(null,null,a),a.collection instanceof c.Collection&&a.collection.off(null,null,a),a.stopListening(),d.result(a,"cleanup")})},configure:function(a){d.extend(k.prototype.options,a),a.manage&&(c.View.prototype.manage=!0),a.el===!1&&(c.View.prototype.el=!1)},setupView:function(a,e){d.each(i.call([],a),function(a){if(a.__manager__)return;var f,g,h,j=k.prototype,l=d.pick(a,b);d.defaults(a,{views:{},__manager__:{},_removeViews:k._removeViews,_removeView:k._removeView},k.prototype),e=a.options=d.defaults(e||{},a.options,j.options),h=d.pick(e,i.call(["events"],d.values(e.events))),d.extend(a,h),(l.render===k.prototype.render||l.render===c.View.prototype.render)&&delete l.render,d.extend(e,l),a._remove=c.View.prototype.remove,a._render=function(a,b){var c=this,d=c.__manager__,e=b.beforeRender;return d.hasRendered&&this._removeViews(),e&&e.call(this,this),this.trigger("beforeRender",this),a(this,b).render()},a.render=k.prototype.render,a.remove!==j.remove&&(a._remove=a.remove,a.remove=j.remove),f=e.views||a.views,d.keys(f).length&&(g=f,a.views={},a.setViews(g)),a.options.template?a.options.template=e.template:a.template&&(e.template=a.template,delete a.template)})}});c.Layout=k,k.VERSION="0.8.2",c.View.prototype._configure=function(a){var b,c;if("el"in a?a.el===!1:this.el===!1)b=!0;return c=f.apply(this,arguments),(a.manage||this.manage)&&k.setupView(this),this.__manager__&&(this.__manager__.noel=b),c},k.prototype.options={prefix:"",deferred:function(){return e.Deferred()},fetch:function(a){return d.template(e(a).html())},partial:function(a,b,c,d){d.selector&&(a=a[c.noel?"filter":"find"](d.selector)),d.insert?this.insert(a,b):this.html(a,b)},html:function(a,b){a.html(b)},insert:function(a,b){a.append(b)},when:function(a){return e.when.apply(null,a)},render:function(a,b){return a(b)},contains:function(a,b){return e.contains(a,b)}},b=d.keys(k.prototype.options)}(typeof global=="object"?global:this),function(){Hoodie.Admin=function(){function a(a){var b=this;this.hoodie=a,this.users=new Hoodie.AdminUsers(this.hoodie,this),this.config=new Hoodie.AdminConfig(this.hoodie,this),this.logs=new Hoodie.AdminLogs(this.hoodie,this),this.modules=new Hoodie.AdminModules(this.hoodie,this),this.hoodie.account._userKey=function(){return"admin"},a=this.hoodie,this.hoodie.account._handleSignInSuccess=function(b){var c,d;return c=a.defer(),d="admin",a.account._authenticated=!0,a.account._setUsername(d),a.config.set("_remote.sync",!1),a.account.trigger("signin",d),c.resolve(d,d)},this.hoodie.remote.sync=function(){return b.hoodie.resolveWith()},this.hoodie.account._handleSignInSuccess.bind(this.hoodie.account)}return a.prototype.on=function(a,b){},a.prototype.authenticate=function(a){return this.hoodie.account.username!=="admin"?this.hoodie.rejectWith("Not signed in as admin."):this.hoodie.account.authenticate()},a.prototype.signIn=function(a){var b;return b="admin",this.hoodie.account.signIn(b,a)},a.prototype.signOut=function(){return this.hoodie.account.signOut()},a.prototype.getAppInfo=function(){var a,b;return a=this.hoodie.defer(),b={name:"minutes.io"},window.setTimeout(function(){return a.resolve(b)}),a.promise()},a.prototype.getStats=function(a){var b,c,d;b=this.hoodie.defer(),d={signups:12,account_deletions:1,users_active:1302,users_total:4211,growth:.04,active:-0.02,since:a};if(!a)for(c in d)d[c]=d[c]*17;return window.setTimeout(function(){return b.resolve(d)}),b.promise()},a.prototype.getConfig=function(){return this.modules.store.find("module","appconfig").pipe(function(a){return a.config})},a.prototype.setConfig=function(a){var b,c;return a==null&&(a={}),c=function(b){return b.config=a,b},b=this.modules.store.update("module","appconfig",c),b},a}(),Hoodie.extend("admin",Hoodie.Admin)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};Hoodie.AdminUsersStore=function(b){function d(){return this._mapDocsFromFindAll=a(this._mapDocsFromFindAll,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.getTotal=function(){return this.findAll().pipe(function(a){return a.length})},d.prototype.search=function(a){var b;return b="/_all_docs?include_docs=true",b=""+b+'&startkey="org.couchdb.user:'+a+'"&endkey="org.couchdb.user:'+a+'|"',this.remote.request("GET",b).pipe(this._mapDocsFromFindAll).pipe(this.parseAllFromRemote)},d.prototype._mapDocsFromFindAll=function(a){var b;return b=a.rows.filter(function(a){return/^org\.couchdb\.user:/.test(a.id)}),b.map(function(a){return a.doc})},d}(Hoodie.RemoteStore)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Hoodie.AdminUsers=function(a){function c(a,b){this.hoodie=a,this.admin=b,c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.Store=Hoodie.AdminUsersStore,c.prototype.name="_users",c}(Hoodie.Remote)}.call(this),function(){Hoodie.AdminConfig=function(){function a(a,b){this.hoodie=a,this.admin=b}return a.prototype.get=function(){},a.prototype.set=function(){},a}()}.call(this),function(){Hoodie.AdminLogs=function(){function a(a,b){this.hoodie=a,this.admin=b}return a.prototype.findAll=function(){return this.hoodie.resolveWith([])},a}()}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};a=[{name:"users",status:"success"},{name:"sharings",status:"success"},{name:"email-out",status:"success"},{name:"logs",status:"error",messages:["Dummy error message","Dummy error message"]}],Hoodie.AdminModules=function(a){function c(a,d){this.hoodie=a,this.admin=d,this.findAll=b(this.findAll,this),this.find=b(this.find,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.prototype.name="modules",c.prototype.find=function(a){return this.store.find("module",a)},c.prototype.findAll=function(){return this.store.findAll("module")},c.prototype.getConfig=function(a){return this.hoodie.resolveWith({email:{transport:{host:"",port:465,auth:{user:"@gmail.com",pass:""},secureConnection:!0,service:"Gmail"}}})},c.prototype.setConfig=function(a,b){return b==null&&(b={}),this.hoodie.resolveWith(b)},c}(Hoodie.Remote)}.call(this),function(){var a;location.hostname==="localhost"?a="http://api.pocket.dev":a=location.protocol+"//"+location.hostname.replace(/^admin/,"api"),window.hoodie=new Hoodie(a),Backbone.Layout.configure({manage:!0,fetch:function(a){return Handlebars.VM.template(JST[a])}}),jQuery(document).ready(function(){return new Pocket})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};window.Pocket=function(b){function d(){this.setAppInfo=a(this.setAppInfo,this),this.loadAppInfo=a(this.loadAppInfo,this),this.handleAuthenticateError=a(this.handleAuthenticateError,this),this.handleAuthenticateSuccess=a(this.handleAuthenticateSuccess,this),this.authenticate=a(this.authenticate,this);var b=this;window.pocket=this,this.setElement("html"),this.registerHandlebarsHelpers(),this.registerListeners(),this.handleSignInAndSignOut(),$.when(this.loadAppInfo(),this.authenticate()).then(function(){return b.router=new d.Router,b.app=new d.ApplicationView,Backbone.history.start()})}return c(d,b),d.prototype.setElement=function(a){return this.$el=$(a)},d.prototype.authenticate=function(){return hoodie.admin.authenticate().then(this.handleAuthenticateSuccess,this.handleAuthenticateError)},d.prototype.handleAuthenticateSuccess=function(){return this.isAuthenticated=!0,this.$el.addClass("authenticated"),hoodie.resolveWith(this.isAuthenticated)},d.prototype.handleAuthenticateError=function(){return this.isAuthenticated=!1,hoodie.resolveWith(this.isAuthenticated)},d.prototype.handleConditionalFormElements=function(a,b){var c,d,e,f,g,h,i,j;b==null&&(b=250),d=$(a).data("conditions"),d=d.split(","),j=[];for(h=0,i=d.length;h<i;h++)c=d[h],e=c.split(":")[0],g=c.split(":")[1],f=!1,$(a).is("input[type=checkbox]")&&($(a).is(":checked")&&e==="true"&&(f=!0),!$(a).is(":checked")&&e==="false"&&(f=!0)),$(a).val()===e&&(f=!0),f?j.push($(g).slideDown(b)):j.push($(g).slideUp(b));return j},d.prototype.registerListeners=function(){var a=this;return $("body").on("change",".formCondition",function(b){return a.handleConditionalFormElements(b.target)}),$("body").on("click","a.signOut",function(b){return b.preventDefault(),hoodie.admin.signOut().done(a.onSignOutSuccess).fail(a.onSignOutFail)})},d.prototype.registerHandlebarsHelpers=function(){return Handlebars.registerHelper("testHelper",function(a,b){return"HANDLEBARS TESTHELPER"}),Handlebars.registerHelper("convertTimestampToISO",function(a){if(!a)return;return a.toString().length===10&&(a+="000"),JSON.parse(JSON.stringify(new Date(parseInt(a))))}),Handlebars.registerHelper("defaultReplyMailAddress",function(){return pocket.appInfo.name?pocket.appInfo.name.indexOf(".")===-1?"please-reply@"+pocket.appInfo.name+".com":"please-reply@"+pocket.appInfo.name:"please-reply@your-app.com"}),null},d.prototype.handleSignInAndSignOut=function(){return hoodie.account.on("signin",function(){return window.location.reload()}),hoodie.account.on("signout",function(){return window.location.reload()})},d.prototype.loadAppInfo=function(){return hoodie.admin.getAppInfo().pipe(this.setAppInfo)},d.prototype.setAppInfo=function(a){return console.log("info",a),pocket.appInfo=a},d}(Backbone.Events)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.BaseView=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.helper=function(){return console.log("HELPDERP")},c.prototype.serialize=function(){return this},c.prototype.beforeRender=function(){return this.appInfo=pocket.appInfo},c.prototype.afterRender=function(){return $(".timeago").timeago()},c.prototype.makeURLHuman=function(a){var b;return this.string=a,b=this.string.replace(/-/g," "),b=b.charAt(0).toUpperCase()+b.slice(1)},c}(Backbone.Layout)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};Pocket.SidebarView=function(b){function d(){return this.renderModules=a(this.renderModules,this),this.renderAppName=a(this.renderAppName,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template="sidebar",d.prototype.handleNavigationStates=function(a){var b;a=a.replace("route:",""),b=$('nav a[href="/#'+a+'"]').parent();if(!b.hasClass("active"))return $("nav li.active").removeClass("active"),b.addClass("active")},d.prototype.afterRender=function(){var a=this;return this.loadAppName(),pocket.router.bind("all",function(b){return a.handleNavigationStates(Backbone.history.fragment)}),this.loadModules(),d.__super__.afterRender.apply(this,arguments)},d.prototype.loadAppName=function(){return window.hoodie.admin.getAppInfo().then(this.renderAppName)},d.prototype.renderAppName=function(a){return this.appInfo=a,this.$el.find("header .appName a").text(this.appInfo.name),$(".sidebar header .appName").bigtext({maxfontsize:20})},d.prototype.loadModules=function(){return window.hoodie.admin.modules.findAll().then(this.renderModules)},d.prototype.renderModules=function(a){var b,c,d;this.modules=a,d=this.modules;for(b in d)c=d[b],c.url=c.id,c.cleanName=this.makeURLHuman(c.url),c.badgeStatus="badge-"+c.status,c.messages?c.messageAmount=c.messages.length:c.messageAmount="";return this.$el.find("nav ul.modules").html(Handlebars.VM.template(JST["sidebar-modules"])(this))},d}(Pocket.BaseView)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.DashboardView=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="dashboard",c.prototype.emailTransportNotConfigured=function(){var a,b,c;return a=((b=this.appConfig)!=null?(c=b.email)!=null?c.transport:void 0:void 0)!=null,!a},c}(Pocket.BaseView)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.UsersView=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="users",c}(Pocket.BaseView)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};Pocket.ModulesView=function(b){function d(){return this.beforeRender=a(this.beforeRender,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template="module",d.prototype.beforeRender=function(){var a;this.module.url=this.module.id.replace("worker-",""),this.module.cleanName=this.makeURLHuman(this.module.url),this.appInfo=pocket.appInfo,this.getView(".module-content")&&this.removeView(".module-content");if(this.moduleViewExists(this.module.id))return a=this.getModuleView(this.module.id),this.setView(".module-content",a),typeof a.update=="function"?a.update():void 0},d.prototype.moduleViewExists=function(a){return Pocket.ModulesView["module-"+a]!=null},d.prototype._cachedViews={},d.prototype.getModuleView=function(a){return this._cachedViews[a]||(this._cachedViews[a]=new Pocket.ModulesView["module-"+this.module.id]),this._cachedViews[a]},d}(Pocket.BaseView)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.ModulesBaseView=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.afterRender=function(){return this.$el.find(".formCondition").each(function(a,b){return pocket.handleConditionalFormElements(b,0)}),c.__super__.afterRender.apply(this,arguments)},c}(Pocket.BaseView)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.ModulesView["module-email-out"]=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="modules/email-out",c}(Pocket.ModulesBaseView)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.ModulesView["module-logs"]=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="modules/logs",c}(Pocket.ModulesBaseView)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.ModulesView["module-sharings"]=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template="modules/sharings",c}(Pocket.ModulesBaseView)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};Pocket.ModulesView["module-users"]=function(b){function d(){return this._updateModule=a(this._updateModule,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template="modules/users",d.prototype.events={"submit form.config":"updateConfig"},d.prototype.update=function(){var a=this;return $.when(hoodie.admin.users.store.findAll(),hoodie.admin.modules.store.find("module","users"),hoodie.admin.getConfig()).then(function(b,c,d){var e;return a.users=b,a.config=$.extend(a._configDefaults(),c.config),a.appConfig=d,(e=a.config).confirmationEmailText||(e.confirmationEmailText="Hello {name}! Thanks for signing up with "+appInfo.name),a.render()})},d.prototype.updateConfig=function(a){return a.preventDefault(),window.promise=hoodie.admin.modules.store.update("module","users",this._updateModule)},d.prototype.emailTransportNotConfigured=function(){var a,b,c;return a=((b=this.appConfig)!=null?(c=b.email)!=null?c.transport:void 0:void 0)!=null,!a},d.prototype._updateModule=function(a){return a.config.confirmationMandatory=this.$el.find("[name=confirmationMandatory]").is(":checked"),a.config.confirmationEmailFrom=this.$el.find("[name=confirmationEmailFrom]").val(),a.config.confirmationEmailSubject=this.$el.find("[name=confirmationEmailSubject]").val(),a.config.confirmationEmailText=this.$el.find("[name=confirmationEmailText]").val(),a},d.prototype._configDefaults=function(){return{confirmationEmailText:"Hello {name}! Thanks for signing up with "+this.appInfo.name}},d}(Pocket.ModulesBaseView)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};Pocket.ModulesView["module-appconfig"]=function(b){function d(){return this.handleSubmitSuccess=a(this.handleSubmitSuccess,this),this.handleSubmitError=a(this.handleSubmitError,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template="modules/appconfig",d.prototype.events={"submit form.email":"updateConfig"},d.prototype.update=function(){var a=this;return hoodie.admin.getConfig().then(function(b){return a.config=b,a.render()})},d.prototype.updateConfig=function(a){var b,c,d;return this.$el.find(".submit").attr("disabled","disabled"),a.preventDefault(),d=this.$el.find(".username").val(),b=this.$el.find(".password").val(),this.config=this._getConfigSkeleton(),this.config.email.transport.auth.user=d,this.config.email.transport.auth.pass=b,c=hoodie.admin.setConfig(this.config).then(this.handleSubmitSuccess,this.handleSubmitError)},d.prototype.handleSubmitError=function(a){return console.log("Could not save global mail config"),console.log(a),this.$el.find(".submit").attr("disabled",null)},d.prototype.handleSubmitSuccess=function(){return console.log("Config saved"),this.$el.find(".submit").attr("disabled",null)},d.prototype._getConfigSkeleton=function(){return{email:{transport:{service:"GMAIL",auth:{user:"",pass:""}}}}},d}(Pocket.ModulesBaseView)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};Pocket.MainView=function(b){function d(){return this.handleSignInError=a(this.handleSignInError,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.views={".sidebar":new Pocket.SidebarView,".main":new Pocket.DashboardView},d.prototype.events={"submit form.signIn":"signIn"},d.prototype.signIn=function(a){var b;return this.$el.find("#signIn").attr("disabled","disabled"),a.preventDefault(),b=this.$el.find("#signInPassword").val(),hoodie.admin.signIn(b).fail(this.handleSignInError)},d.prototype.handleSignInError=function(){return $("form.signIn .error").text("Wrong password, please try again"),$("#signIn").attr("disabled",null)},d}(Pocket.BaseView)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.ApplicationView=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.events={"click a":"handleLinks"},c.prototype.views={body:new Pocket.MainView},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.setElement($("html")),pocket.isAuthenticated?this.views.body.template="main":this.views.body.template="signin",this.render()},c.prototype.handleLinks=function(a){var b;b=$(a.target).attr("href");if(/\.pdf$/.test(b))return!0;if(/^\/[^\/]/.test(b))return pocket.router.navigate(b.substr(1),!0),!1},c}(Pocket.BaseView)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};Pocket.Router=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.routes={"":"dashboard","modules/:moduleName":"modules"},c.prototype.dashboard=function(){var a;return a=new Pocket.DashboardView,pocket.app.views.body.setView(".main",a),$.when(hoodie.admin.getStats(1358610679),hoodie.admin.getConfig()).then(function(b,c){return a.stats=b,a.appConfig=c,a.render()})},c.prototype.modules=function(a){var b;return console.log(a),b=new Pocket.ModulesView,pocket.app.views.body.setView(".main",b),window.hoodie.admin.modules.find(a).then(function(a){return b.module=a,b.render()})},c}(Backbone.Router)}.call(this),this.JST=this.JST||{},this.JST.dashboard=function(a,b,c,d,e){function n(a,b){return'\n  <div class="alert alert-error">\n    <button type="button" class="close" data-dismiss="alert">&times;</button>\n    <ul>\n      <li>\n        <a href="/modules/appconfig"><strong>Appconfig:</strong><br>\n        Emails cannot be send, please configure email transport.</a>\n      </li>\n    </ul>\n  </div>\n  '}c=c||a.helpers,e=e||{};var f="",g,h,i,j="function",k=this.escapeExpression,l=c.helperMissing,m=this;f+='<div class="content centered">\n  <h2 class="top">New events for ',g=b.appInfo,g=g==null||g===!1?g:g.name,g=typeof g===j?g.apply(b):g,f+=a.Utils.escapeExpression(g)+' since your last visit <span class="timeago" title="',g=b.stats,g=g==null||g===!1?g:g.since,h={},i=c.convertTimestampToISO,g=i?i.call(b,g,{hash:h,data:e}):l.call(b,"convertTimestampToISO",g,{hash:h,data:e}),f+=a.Utils.escapeExpression(g)+'">',g=b.stats,g=g==null||g===!1?g:g.since,g=typeof g===j?g.apply(b):g,f+=a.Utils.escapeExpression(g)+"</span></h2>\n\n  ",g=b.emailTransportNotConfigured,h={},g=c["if"].call(b,g,{hash:h,inverse:m.noop,fn:m.program(1,n,e),data:e});if(g||g===0)f+=g;return f+='\n  <div class="alert alert-info">\n    <button type="button" class="close" data-dismiss="alert">&times;</button>\n    <ul>\n      <li>Module Signup confirmation reports: New user confirmed! (about 6 hours ago)</li>\n    </ul>\n  </div>\n\n  <div class="row-fluid statistics">\n    <div class="panel success span4">\n      <span>New signups/past 30 days</span>\n      <h1>',g=b.stats,g=g==null||g===!1?g:g.signups,g=typeof g===j?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h1>\n    </div>\n    <div class="panel warning span4">\n      <span>Account deletions/past 30 days</span>\n      <h1>',g=b.stats,g=g==null||g===!1?g:g.account_deletions,g=typeof g===j?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h1>\n    </div>\n    <div class="panel success span4">\n      <span>Growth/past 30 days</span>\n      <h1>',g=b.stats,g=g==null||g===!1?g:g.growth,g=typeof g===j?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'%</h1>\n    </div>\n  </div>\n  <div class="row-fluid statistics">\n    <div class="panel info span4">\n      <span>Total Users</span>\n      <h1>',g=b.stats,g=g==null||g===!1?g:g.users_total,g=typeof g===j?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h1>\n    </div>\n    <div class="panel info span4">\n      <span>Active Users / past 30 days</span>\n      <h1>',g=b.stats,g=g==null||g===!1?g:g.users_active,g=typeof g===j?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h1>\n    </div>\n    <div class="panel warning span4">\n      <span>Activity / past 30 days</span>\n      <h1>',g=b.stats,g=g==null||g===!1?g:g.active,g=typeof g===j?g.apply(b):g,f+=a.Utils.escapeExpression(g)+"%</h1>\n    </div>\n  </div>\n</div>\n",f},this.JST["layouts/application"]=function(a,b,c,d,e){return c=c||a.helpers,e=e||{},'<div class="topbar">\n  <a href="#" class="signOut">Sign out</a>\n</div>\n<div class="sidebar">\n  sidebar\n</div>\n<div class="main">\n  main\n</div>'},this.JST.main=function(a,b,c,d,e){return c=c||a.helpers,e=e||{},'<a href="#" class="signOut">Sign out</a>\n\n<div class="sidebar">\n\n</div>\n<div class="main">\n\n</div>\n'},this.JST.module=function(a,b,c,d,e){c=c||a.helpers,e=e||{};var f="",g,h="function",i=this.escapeExpression;return f+='<div class="content centered">\n  <h2 class="top">',g=b.module,g=g==null||g===!1?g:g.cleanName,g=typeof g===h?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'</h2>\n\n  <div class="module-content"></div>\n</div>\n',f},this.JST["modules/appconfig"]=function(a,b,c,d,e){c=c||a.helpers,e=e||{};var f="",g,h="function",i=this.escapeExpression;return f+='<h2>Set GMAIL email &amp; password for sending emails</h2>\n\n<form class="email form-horizontal" action="">\n  <span class="error"></span>\n  <div class="control-group">\n    <label class="control-label">Service</label>\n    <div class="controls">\n      <select>\n        <option>GMAIL</option>\n      </select>\n    </div>\n  </div>\n  <div class="control-group">\n    <label class="control-label">Username</label>\n    <div class="controls">\n      <input class="username" type="text" placeholder="me@gmail.com" value="',g=b.config,g=g==null||g===!1?g:g.email,g=g==null||g===!1?g:g.transport,g=g==null||g===!1?g:g.auth,g=g==null||g===!1?g:g.user,g=typeof g===h?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'">\n    </div>\n  </div>\n  <div class="control-group">\n    <label class="control-label">Password</label>\n    <div class="controls">\n      <input class="password" type="password" value="',g=b.config,g=g==null||g===!1?g:g.email,g=g==null||g===!1?g:g.transport,g=g==null||g===!1?g:g.auth,g=g==null||g===!1?g:g.pass,g=typeof g===h?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'">\n    </div>\n  </div>\n\n  <div class="control-group">\n    <div class="controls">\n      <button class="submit btn" type="submit">Submit</button>\n    </div>\n  </div>\n\n</form>\n',f},this.JST["modules/email-out"]=function(a,b,c,d,e){c=c||a.helpers,e=e||{};var f="",g,h,i="function",j=this.escapeExpression;return f+='<div class="module" id="',g=b.module,g=g==null||g===!1?g:g.name,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'">\n  <legend>Settings</legend>\n\n  <span class="description">E-Mail out is in charge of all outgoing mail from this Hoodie instance</span>\n  <form action="">\n    <section>\n      <div class="formLabel">\n        <label>From address</label>\n      </div>\n      <div class="form">\n        <input type="email" placeholder="',h=c.defaultReplyMailAddress,h?g=h.call(b,{hash:{},data:e}):(g=b.defaultReplyMailAddress,g=typeof g===i?g.apply(b):g),f+=a.Utils.escapeExpression(g)+'" required>\n        <span class="note">From address for all of your app\'s emails.</span>\n      </div>\n    </section>\n  </form>\n</div>\n',f},this.JST["modules/logs"]=function(a,b,c,d,e){return c=c||a.helpers,e=e||{},"hello from /app/scrits/templates/modules/logs.hbs\n"},this.JST["modules/sharings"]=function(a,b,c,d,e){return c=c||a.helpers,e=e||{},"hello from /app/scrits/templates/modules/sharings.hbs\n"},this.JST["modules/users"]=function(a,b,c,d,e){function l(a,b){return'\n    <section>\n      <div class="formLabel">\n        <label>Signup confirmation</label>\n      </div>\n      <div class="form">\n        <span class="note">Email needs to be configured in <a href="/modules/appconfig">Appconfig</a> before enabling signup confirmation</span>\n      </div>\n    </section>\n    '}function m(b,d){var e="",f,g;return e+='\n    <section>\n      <div class="formLabel">\n        <label>Signup confirmation</label>\n      </div>\n      <div class="form">\n        <label class="checkbox">\n          <input type="checkbox" name="confirmationMandatory" class="formCondition" data-conditions="true:.confirmationOptions"> is mandatory\n        </label>\n      </div>\n    </section>\n\n    <section class="confirmationOptions">\n      <div class="formLabel">\n        <label>From address</label>\n      </div>\n      <div class="form">\n        <input type="email" name="confirmationEmailFrom" value="',f=b.config,f=f==null||f===!1?f:f.confirmationEmailFrom,f=typeof f===i?f.apply(b):f,e+=a.Utils.escapeExpression(f)+'" placeholder="',g=c.defaultReplyMailAddress,g?f=g.call(b,{hash:{},data:d}):(f=b.defaultReplyMailAddress,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+'" required>\n        <span class="note">From address for all of your app\'s emails.</span>\n      </div>\n    </section>\n\n    <section class="confirmationOptions">\n      <div class="formLabel">\n        <label>Subject line</label>\n      </div>\n      <div class="form">\n        <input type="text" name="confirmationEmailSubject" value="',f=b.config,f=f==null||f===!1?f:f.confirmationEmailSubject,f=typeof f===i?f.apply(b):f,e+=a.Utils.escapeExpression(f)+'" placeholder="Please confirm your signup at ',f=b.appInfo,f=f==null||f===!1?f:f.name,f=typeof f===i?f.apply(b):f,e+=a.Utils.escapeExpression(f)+'">\n      </div>\n    </section>\n\n    <section class="confirmationOptions">\n      <div class="formLabel">\n        <label>Body</label>\n      </div>\n      <div class="form">\n        <textarea rows="4" name="confirmationEmailText">',f=b.config,f=f==null||f===!1?f:f.confirmationEmailText,f=typeof f===i?f.apply(b):f,e+=a.Utils.escapeExpression(f)+'</textarea>\n      </div>\n    </section>\n\n    <section>\n      <div class="formLabel">\n        &nbsp;\n      </div>\n      <div class="form">\n        <button class="btn" type="submit">update</button>\n      </div>\n    </section>\n    ',e}function n(b,d){var e="",f,g;return e+="\n      <tr>\n        <td>",g=c.id,g?f=g.call(b,{hash:{},data:d}):(f=b.id,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n        <td>",g=c.lastLogin,g?f=g.call(b,{hash:{},data:d}):(f=b.lastLogin,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n        <td>",g=c.signedUpAt,g?f=g.call(b,{hash:{},data:d}):(f=b.signedUpAt,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n        <td>",g=c.state,g?f=g.call(b,{hash:{},data:d}):(f=b.state,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n        <td>resend / new</td>\n        <td>edit / delete</td>\n      </tr>\n      ",e}c=c||a.helpers,e=e||{};var f="",g,h,i="function",j=this.escapeExpression,k=this;f+='<div class="module" id="',g=b.module,g=g==null||g===!1?g:g.name,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'">\n  <legend>Settings</legend>\n\n  <span class="description">Configure whether users must confirm their signup and if yes, set up the email they will receive for this purpose.</span>\n\n  <form class="config">\n    ',g=b.emailTransportNotConfigured,h={},g=c["if"].call(b,g,{hash:h,inverse:k.program(3,m,e),fn:k.program(1,l,e),data:e});if(g||g===0)f+=g;f+='\n  </form>\n</div>\n\n<hr>\n\n<div class="content centered">\n  <h2 class="top">Users</h2>\n  <div class="userSearch">\n    <form class="form-search">\n      <div class="input-append">\n        <input type="text" class="span2 search-query">\n        <button type="submit" class="btn">Search</button>\n      </div>\n    </form>\n  </div>\n  <div class="tableStatus">\n    <p class="currentSearchTerm muted">Currently displaying all users</p>\n    <p class="currentSearchMetrics muted">Showing 50 of 4211 users</p>\n  </div>\n  <table class="table">\n    <thead>\n      <tr>\n        <th>Email</th>\n        <th>Last seen</th>\n        <th>Signup date</th>\n        <th>State</th>\n        <th>Password</th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      ',g=b.users,h={},g=c.each.call(b,g,{hash:h,inverse:k.noop,fn:k.program(5,n,e),data:e});if(g||g===0)f+=g;return f+='\n    </tbody>\n  </table>\n  <div class="tableStatus">\n    <p class="currentSearchTerm muted">Currently displaying all users</p>\n    <p class="currentSearchMetrics muted">Showing 50 of 4211 users</p>\n  </div>\n</div>\n',f},this.JST["sidebar-modules"]=function(a,b,c,d,e){function k(b,d){var e="",f,g;return e+='\n<li>\n  <a href="/#modules/',g=c.url,g?f=g.call(b,{hash:{},data:d}):(f=b.url,f=typeof f===h?f.apply(b):f),e+=a.Utils.escapeExpression(f)+'" title="',g=c.cleanName,g?f=g.call(b,{hash:{},data:d}):(f=b.cleanName,f=typeof f===h?f.apply(b):f),e+=a.Utils.escapeExpression(f)+'">\n    <span class="name">',g=c.cleanName,g?f=g.call(b,{hash:{},data:d}):(f=b.cleanName,f=typeof f===h?f.apply(b):f),e+=a.Utils.escapeExpression(f)+'</span>\n    <span class="badge ',g=c.badgeStatus,g?f=g.call(b,{hash:{},data:d}):(f=b.badgeStatus,f=typeof f===h?f.apply(b):f),e+=a.Utils.escapeExpression(f)+'">',g=c.messageAmount,g?f=g.call(b,{hash:{},data:d}):(f=b.messageAmount,f=typeof f===h?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</span>\n  </a>\n</li>\n",e}c=c||a.helpers,e=e||{};var f,g,h="function",i=this.escapeExpression,j=this;return f=b.modules,g={},f=c.each.call(b,f,{hash:g,inverse:j.noop,fn:j.program(1,k,e),data:e}),f||f===0?f:""},this.JST.sidebar=function(a,b,c,d,e){return c=c||a.helpers,e=e||{},'<header>\n  <div class="logo ir">Hoodie Pocket</div>\n  <div class="appName"><div><a href="/#"></a></div></div>\n</header>\n<nav>\n  <ul class="modules"></ul>\n</nav>\n'},this.JST.signin=function(a,b,c,d,e){c=c||a.helpers,e=e||{};var f="",g,h,i="function",j=this.escapeExpression;return f+='<div class="signInContainer">\n  <div class="logo ir">Hoodie Pocket</div>\n  <h2 class="top">',h=c.a,h?g=h.call(b,{hash:{},data:e}):(g=b.a,g=typeof g===i?g.apply(b):g),f+=a.Utils.escapeExpression(g)+" Welcome to ",g=b.appInfo,g=g==null||g===!1?g:g.name,g=typeof g===i?g.apply(b):g,f+=a.Utils.escapeExpression(g)+'\'s Pocket</h2>\n  <form class="signIn">\n    <section class="noBorder">\n      <span class="error"></span>\n      <div class="formLabel">\n        <label>Admin password</label>\n      </div>\n      <div class="form">\n        <input id="signInPassword" type="password" autofocus>\n      </div>\n      <div class="formLabel">\n      </div>\n      <div class="form">\n        <button id="signIn" type="submit" class="btn">Sign in!</button>\n      </div>\n    </section>\n  </form>\n</div>\n',f},this.JST.users=function(a,b,c,d,e){function l(b,d){var e="",f,g;return e+="\n      <tr>\n        <td>",g=c.name,g?f=g.call(b,{hash:{},data:d}):(f=b.name,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n        <td>",g=c.lastLogin,g?f=g.call(b,{hash:{},data:d}):(f=b.lastLogin,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n        <td>",g=c.signedUpAt,g?f=g.call(b,{hash:{},data:d}):(f=b.signedUpAt,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n        <td>",g=c.state,g?f=g.call(b,{hash:{},data:d}):(f=b.state,f=typeof f===i?f.apply(b):f),e+=a.Utils.escapeExpression(f)+"</td>\n        <td>resend / new</td>\n        <td>edit / delete</td>\n      </tr>\n      ",e}c=c||a.helpers,e=e||{};var f="",g,h,i="function",j=this.escapeExpression,k=this;f+='<div class="content centered">\n  <h2 class="top">Users</h2>\n  <div class="userSearch">\n    <form class="form-search">\n      <div class="input-append">\n        <input type="text" class="span2 search-query">\n        <button type="submit" class="btn">Search</button>\n      </div>\n    </form>\n  </div>\n  <div class="tableStatus" >\n    <p class="currentSearchTerm muted">Currently displaying all users</p>\n    <p class="currentSearchMetrics muted">Showing 50 of 4211 users</p>\n  </div>\n  <table class="table">\n    <thead>\n      <tr>\n        <th>Email</th>\n        <th>Last seen</th>\n        <th>Signup date</th>\n        <th>State</th>\n        <th>Password</th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      ',g=b.users,h={},g=c.each.call(b,g,{hash:h,inverse:k.noop,fn:k.program(1,l,e),data:e});if(g||g===0)f+=g;return f+='\n    </tbody>\n  </table>\n  <div class="tableStatus">\n    <p class="currentSearchTerm muted">Currently displaying all users</p>\n    <p class="currentSearchMetrics muted">Showing 50 of 4211 users</p>\n  </div>\n</div>\n',f};